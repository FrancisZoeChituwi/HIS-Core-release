(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de711"],{8652:function(e,t,i){"use strict";i.r(t);var n=i("7a23");function a(e,t,i,a,o,r){var s=Object(n["resolveComponent"])("his-standard-form");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}i("ac1f"),i("466d");var o=i("9ab4"),r=i("9441"),s=i("7365"),u=i("2706"),c=i("d95e"),l=i("e86e"),v=i("b446"),d=i("b5e4"),b=i("cc6f"),h=function(e){function t(t,i){return e.call(this,t,39,i)||this}return Object(o["c"])(t,e),t}(b["a"]),f=Object(n["defineComponent"])({components:{HisStandardForm:r["a"]},mixins:[s["a"]],data:function(){return{hivService:{}}},watch:{ready:{handler:function(e){return Object(o["b"])(this,void 0,void 0,(function(){return Object(o["d"])(this,(function(t){return e&&(this.hivService=new h(this.patient.getID(),this.providerID),this.fields=this.getFields()),[2]}))}))},immediate:!0,deep:!0}},methods:{onSubmit:function(e,t){return Object(o["b"])(this,void 0,void 0,(function(){var e,i,n;return Object(o["d"])(this,(function(a){switch(a.label){case 0:return[4,this.hivService.createEncounter()];case 1:return e=a.sent(),e?[4,this.resolveObs(Object(o["a"])({},t))]:[2,Object(d["e"])("Unable to create encounter")];case 2:return i=a.sent(),[4,this.hivService.saveObservationList(i)];case 3:return n=a.sent(),n?(this.nextTask(),[2]):[2,Object(d["e"])("Unable to save observations")]}}))}))},buildDateObs:function(e,t,i){var n={};return n=t.match(/unknown/i)?this.hivService.buildValueText(e,"Unknown"):i?this.hivService.buildValueDateEstimated(e,t):this.hivService.buildValueDate(e,t),n},getFields:function(){var e=this;return Object(o["f"])([{id:"hiv_status",helpText:"HIV status",type:c["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},computedValue:function(t){var i=t.value;return{obs:e.hivService.buildValueText("HIV status",i)}},options:function(){return[{label:"Positive not ART",value:"Positive not ART"},{label:"Posititve on ART",value:"Positive on ART"},{label:"Previous negative",value:"Previous negative"},{label:"New positive",value:"New positive"},{label:"New negative",value:"New negative"},{label:"Never tested",value:"Never tested"}]}}],Object(v["b"])({id:"hiv_test_date",helpText:"HIV Test",required:!0,minDate:function(){return e.patient.getBirthdate()},condition:function(e){return"Never tested"!==e.hiv_status.value},summaryLabel:"HIV test date",estimation:{allowUnknown:!0},computeValue:function(t,i){return e.buildDateObs("HIV test date",t,i)}},this.hivService.getDate()),[{id:"test_location",helpText:"HIV test location",type:c["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},computedValue:function(t){var i=t.label;return{obs:e.hivService.buildValueText("HIV test location",i)}},condition:function(e){return"Never tested"!==e.hiv_status.value},options:function(e,t){return void 0===t&&(t=""),Object(l["b"])(t)},config:{showKeyboard:!0}}])}}}),p=i("d959"),m=i.n(p);const O=m()(f,[["render",a]]);t["default"]=O}}]);
//# sourceMappingURL=chunk-2d0de711.16a5c58c.js.map