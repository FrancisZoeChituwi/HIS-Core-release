(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226508"],{e7aa:function(e,t,n){"use strict";n.r(t);var a=n("7a23");function i(e,t,n,i,s,r){var o=Object(a["resolveComponent"])("his-standard-form");return Object(a["openBlock"])(),Object(a["createBlock"])(o,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}n("4160"),n("b64b"),n("d3b7"),n("ac1f"),n("3ca3"),n("466d"),n("159b"),n("ddb0");var s=n("9ab4"),r=n("d95e"),o=n("7920"),u=n("2706"),l=n("7365"),c=n("cc6f"),d=function(e){function t(t,n){return e.call(this,t,181,n)||this}return Object(s["c"])(t,e),t}(c["a"]),f=n("b5e4"),b=n("b446"),v=n("e86e"),h=Object(a["defineComponent"])({mixins:[l["a"]],components:{HisStandardForm:o["a"]},data:function(){return{assessment:{},obs:[],showHIVQuestions:!0,offerCxCa:!1}},watch:{patient:{handler:function(){return Object(s["b"])(this,void 0,void 0,(function(){var e;return Object(s["d"])(this,(function(t){switch(t.label){case 0:return this.assessment=new d(this.patientID,this.providerID),[4,this.setOfferCxCa()];case 1:return t.sent(),e=this,[4,this.getFields()];case 2:return e.fields=t.sent(),[2]}}))}))},deep:!0}},methods:{onFinish:function(e,t){return Object(s["b"])(this,void 0,void 0,(function(){var e,n,a,i;return Object(s["d"])(this,(function(r){switch(r.label){case 0:return[4,this.assessment.createEncounter()];case 1:return e=r.sent(),e?(n=[],Object.keys(t).forEach((function(e){n.push(t[e].obs)})),[4,Promise.all(Object(s["f"])(this.obs,n))]):[2,Object(f["e"])("Unable to create encounter")];case 2:return a=r.sent(),[4,this.assessment.saveObservationList(a)];case 3:return i=r.sent(),i?(Object(f["d"])("Observations and encounter created!"),this.nextTask(),[2]):[2,Object(f["e"])("Unable to save patient observations")]}}))}))},setOfferCxCa:function(){return Object(s["b"])(this,void 0,void 0,(function(){var e;return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,this.assessment.getFirstValueCoded("Offer CxCa")];case 1:return e=t.sent(),this.offerCxCa=e&&"Yes"===e,this.offerCxCa||this.obs.push(this.assessment.buildValueCoded("Ever had CxCa","No")),[2,!0]}}))}))},enterPreviousCxCaData:function(e){var t="Yes"===e.ever_had_cxca.value,n="Yes"===e.results_available.value;return t&&n},getFacilities:function(e){return void 0===e&&(e=""),Object(v["b"])(e)},getFields:function(){var e=this;return Object(s["f"])([{id:"reason_for_visit",helpText:"Reason for visit",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},options:function(){return[{label:"Initial screening",value:"Initial screening"},{label:"Postponed treatmment",value:"Postponed treatment"},{label:"One year subsequent check-up after treatment",value:"One year subsequent check-up after treatment"},{label:"Subsequent screening",value:"Subsequent screening"},{label:"Problem visit after treatment",value:"Problem visit after treatment"},{label:"Referral",value:"Referral"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Reason for visit",t.value)}}},{id:"hiv_status",helpText:"HIV status",type:r["b"].TT_SELECT,condition:function(){return e.showHIVQuestions},validation:function(e){return u["a"].required(e)},options:function(){return[{label:"Positive on ART",value:"Positive on ART"},{label:"Positive Not on ART",value:"Positive Not on ART"},{label:"Negative",value:"Negative"},{label:"Never tested",value:"Never tested"},{label:"Prefers Not to disclose",value:"Undisclosed"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("HIV status",t.value)}}}],Object(b["b"])({id:"hiv_test_date",helpText:"HIV test result date",required:!0,condition:function(e){return e.hiv_status.value.match(/Negative|ART/i)},minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.assessment.getDate()},estimation:{allowUnknown:!1},computeValue:function(t,n){return{date:t,tag:"cxca screening",isEstimate:n,obs:e.assessment.buildValueDate("HIV test date",t)}}},this.assessment.getDate()),[{id:"ever_had_cxca",helpText:"Ever had CxCa screening",type:r["b"].TT_SELECT,condition:function(e){return"Initial screening"!==e.reason_for_visit.value},options:function(){return e.yesNoOptions()},validation:function(e){return u["a"].required(e)},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Ever had CxCa",t.value)}}},{id:"results_available",helpText:"Results available?",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},condition:function(e){return"Initial screening"!==e.reason_for_visit.value},options:function(){return e.yesNoOptions()},computedValue:function(t){return{obs:e.assessment.buildValueCoded("CxCa test results",t.value)}}},{id:"location",helpText:"CxCa screening location",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},options:function(t,n){return void 0===n&&(n=""),e.getFacilities(n)},config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:function(t){return e.enterPreviousCxCaData(t)},computedValue:function(t){return{obs:e.assessment.buildValueText("Previous CxCa location",t.value)}}}],Object(b["b"])({id:"cxca_date",helpText:"Previous CxCa test",required:!0,minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.assessment.getDate()},estimation:{allowUnknown:!1},condition:function(t){return e.enterPreviousCxCaData(t)},computeValue:function(t,n){return{date:t,tag:"cxca screening",isEstimate:n,obs:e.assessment.buildValueDate("cxca test date",t)}}},this.assessment.getDate()),[{id:"previous_screening_method",helpText:"Previous screening method",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},condition:function(t){return e.enterPreviousCxCaData(t)},options:function(){return[{label:"VIA",value:"VIA"},{label:"PAP Smear",value:"PAP Smear"},{label:"HPV DNA",value:"HPV DNA"},{label:"Speculum Exam",value:"Speculum Exam"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Previous CxCa screening method",t.value)}}},{id:"offer_CxCa",helpText:"Offer CxCa screening today",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},options:function(){return e.yesNoOptions()},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Offer CxCa",t.value)}}},{id:"screening_method",helpText:"Screening method being offered",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},condition:function(e){return"Yes"===e.offer_CxCa.value},options:function(){return[{label:"VIA",value:"VIA"},{label:"PAP Smear",value:"PAP Smear"},{label:"HPV DNA",value:"HPV DNA"},{label:"Speculum Exam",value:"Speculum Exam"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("CxCa screening method",t.value)}},unload:function(t){return Object(s["b"])(e,void 0,void 0,(function(){return Object(s["d"])(this,(function(e){return"VIA"===t.value&&this.obs.push(this.assessment.buildValueCoded("Waiting for test results","No")),[2]}))}))}},{id:"waiting_for_lab_tests",helpText:"Waiting for lab results",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},condition:function(e){return!e.screening_method.value.match(/VIA|EXAM/i)},options:function(){return e.yesNoOptions()},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Waiting for test results",t.value)}}},{id:"reason_for_no_cxca",helpText:"Reason for NOT offering CxCa screening",type:r["b"].TT_SELECT,validation:function(e){return u["a"].required(e)},condition:function(e){return"No"===e.offer_CxCa.value},options:function(){return[{label:"Client preferred counselling",value:"Preferred counseling"},{label:"Not applicable",value:"Not applicable"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Reason for NOT offering CxCa",t.value)}}}])}}}),m=n("d959"),p=n.n(m);const C=p()(h,[["render",i]]);t["default"]=C}}]);
//# sourceMappingURL=chunk-2d226508.9dafd70a.js.map