(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eed33bb6"],{"4b630":function(t,e,n){},"552a":function(t,e,n){"use strict";var r=n("7a23"),o=Object(r["withScopeId"])("data-v-4aa5994e");Object(r["pushScopeId"])("data-v-4aa5994e");var i=Object(r["createTextVNode"])("Title"),a=Object(r["createTextVNode"])("Period"),s={class:"report-content"};Object(r["popScopeId"])();var c=o((function(t,e,n,c,u,d){var l=Object(r["resolveComponent"])("his-standard-form"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-toolbar"),h=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("report-table"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("his-footer"),g=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["withDirectives"])(Object(r["createVNode"])(l,{onOnFinish:t.onFinish,skipSummary:!0,fields:t.fields},null,8,["onOnFinish","fields"]),[[r["vShow"],t.showForm]]),t.showForm?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0},{default:o((function(){return[Object(r["createVNode"])(h,null,{default:o((function(){return[Object(r["createVNode"])(f,null,{default:o((function(){return[Object(r["createVNode"])(b,null,{default:o((function(){return[Object(r["createVNode"])(p,{size:"2"},{default:o((function(){return[Object(r["createVNode"])("img",{class:"logo",src:t.logo},null,8,["src"])]})),_:1}),Object(r["createVNode"])(p,null,{default:o((function(){return[Object(r["createVNode"])(b,null,{default:o((function(){return[Object(r["createVNode"])(p,{size:"2"},{default:o((function(){return[i]})),_:1}),Object(r["createVNode"])(p,null,{default:o((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.title),1)]})),_:1})]})),_:1}),t.period?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0},{default:o((function(){return[Object(r["createVNode"])(p,{size:"2"},{default:o((function(){return[a]})),_:1}),Object(r["createVNode"])(p,null,{default:o((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.period),1)]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,null,{default:o((function(){return[Object(r["createVNode"])("div",s,[Object(r["createVNode"])(m,{rows:t.rows,columns:t.columns,paginated:t.paginated,itemsPerPage:t.itemsPerPage},null,8,["rows","columns","paginated","itemsPerPage"])])]})),_:1}),Object(r["createVNode"])(j,{btns:t.btns},null,8,["btns"])]})),_:1}))],64)})),u=(n("a9e3"),n("9ab4")),d=n("0f25"),l=n("80e3"),p=n("ba82"),b=n("9ceb"),f=n("7920"),h=n("8a30"),m=n("b5e4"),O=Object(r["defineComponent"])({components:{HisStandardForm:f["a"],IonHeader:h["q"],ReportTable:l["a"],HisFooter:d["a"],IonPage:h["B"],IonContent:h["n"],IonToolbar:h["N"],IonRow:h["F"],IonCol:h["m"]},props:{title:{type:String,required:!0},period:{type:String,default:""},fields:{type:Object,default:function(){return[]}},columns:{type:Object,required:!0},rows:{type:Object,required:!0},paginated:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:5},customBtns:{type:Array,default:function(){return[]}},canExportPDf:{type:Boolean,default:!0},canExportCsv:{type:Boolean,default:!0},onReportConfiguration:{type:Function,required:!1}},data:function(){return{formData:{},computeFormData:{},btns:[],isLoadingData:!1,showForm:!1,logo:"/assets/images/login-logos/Malawi-Coat_of_arms_of_arms.png"}},methods:{getFileName:function(){return this.title+"-"+this.period},onFinish:function(t,e){return Object(u["b"])(this,void 0,void 0,(function(){var n;return Object(u["d"])(this,(function(r){switch(r.label){case 0:return this.formData=t,this.computeFormData=e,this.showForm=!1,[4,this.presentLoading()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,6]),this.onReportConfiguration?[4,this.onReportConfiguration(this.formData,this.computeFormData)]:[3,4];case 3:r.sent(),r.label=4;case 4:return h["S"].dismiss(),[3,6];case 5:return n=r.sent(),console.error(n),Object(m["c"])(n),h["S"].dismiss(),[3,6];case 6:return[2]}}))}))},reloadReport:function(){return Object(u["b"])(this,void 0,void 0,(function(){return Object(u["d"])(this,(function(t){switch(t.label){case 0:return[4,this.onFinish(this.formData,this.computeFormData)];case 1:return t.sent(),[2]}}))}))},presentLoading:function(){return Object(u["b"])(this,void 0,void 0,(function(){var t;return Object(u["d"])(this,(function(e){switch(e.label){case 0:return[4,h["S"].create({message:"Please wait...",backdropDismiss:!1})];case 1:return t=e.sent(),[4,t.present()];case 2:return e.sent(),[2]}}))}))}},created:function(){var t=this;this.showForm=!!this.fields.length,this.btns=this.customBtns,this.canExportCsv&&this.btns.push({name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){var t,e,n;return Object(u["d"])(this,(function(r){return t=Object(b["b"])(this.columns,this.rows),e=t.columns,n=t.rows,Object(p["a"])(e,n,this.getFileName()),[2]}))}))}}),this.canExportPDf&&this.btns.push({name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){var t,e,n;return Object(u["d"])(this,(function(r){return t=Object(b["b"])(this.columns,this.rows),e=t.columns,n=t.rows,Object(p["b"])(e,n,this.getFileName()),[2]}))}))}}),this.btns.push({name:"Back",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){return t.showForm=!0}}),this.btns.push({name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){return Object(u["d"])(this,(function(t){return[2,this.reloadReport()]}))}))}}),this.btns.push({name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){return Object(u["d"])(this,(function(t){return[2,this.$router.push({path:"/"})]}))}))}})}}),j=(n("5965"),n("d959")),g=n.n(j);const v=g()(O,[["render",c],["__scopeId","data-v-4aa5994e"]]);e["a"]=v},5965:function(t,e,n){"use strict";n("4b630")},fcd5:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return l}));n("4160"),n("b64b"),n("159b");var r=n("9ab4"),o=n("1c74"),i=n("9283"),a=n("b89f"),s=n("bef6"),c={one:"AL 1",two:"AL 2",three:"AL 3",four:"LA 4"},u=["Diabetes","Hypertension","Stroke","Suspected cancer","Confirmed cancer","Palliative cancer","Asthma","Depression","Acute psychosis","Chronic psychosis","Epilepsy"],d=["Organic mental disorder (Chronic)","Organic mental disorder (acute)","Alcohol use mental disorder","Drug use mental disorder","Schizophrenia","Acute and transient psychotic disorder","Schizo-affective disorder","Mood-affective disorder (MANIC)","Mood-affective disorder (BIPOLAR)","Mood-affective disorder (DEPRESSION)","Anxiety disorder","Stress reaction adjustment disorder","Dissociative conversion disorder","Somatoform disorder","Puerperal mental disorder","Personality/Behaviour disorder","Mental retardation","Psychological mental disorder","Hyperkinetic conduct disorder","Epilepsy"],l=function(t){function e(){var e=t.call(this)||this;return e.endDate="",e.startDate="",e.quarter="",e.date=o["d"].getSessionDate(),e.programID=o["d"].getProgramID(),e}return Object(r["c"])(e,t),e.prototype.getPatientsWithNIDs=function(){return this.getReport("with_nids")},e.prototype.getClinicRegistrations=function(){return this.getReport("registration")},e.prototype.getDrugsGivenWithoutPrescription=function(){return this.getReport("drugs_given_without_prescription")},e.prototype.getDrugsGivenWithPrescription=function(){return this.getReport("drugs_given_with_prescription")},e.prototype.getDiagnosis=function(){return this.getReport("diagnosis")},e.prototype.getDiagnosisByAddress=function(){return this.getReport("diagnosis_by_address")},e.prototype.getLaPrescriptions=function(){var t="programs/"+this.programID+"/reports/la_prescriptions";return o["d"].getJson(t,{start_date:this.startDate,end_date:this.endDate})},e.prototype.printLaReport=function(t){var e=new a["a"],n="programs/"+this.programID+"/barcodes/la_report",r={"date[start]":this.startDate,"date[end]":this.endDate};return Object.keys(c).forEach((function(e,n){n++,r[n+"[prescription]"]=t["total_la_"+e+"_prescribed_drugs"],r[n+"[dispensed]"]=t["total_la_"+e+"_dispensed_drugs"]})),e.printLbl(n+"?"+s["a"].parameterizeObjToString(r))},e.prototype.getDateIntervalPeriod=function(){return i["a"].toStandardHisDisplayFormat(this.startDate)+" - "+i["a"].toStandardHisDisplayFormat(this.endDate)},e.prototype.setStartDate=function(t){this.startDate=t},e.prototype.setEndDate=function(t){this.endDate=t},e.prototype.setQuarter=function(t){this.quarter=t},e.prototype.getReport=function(t,e){return void 0===e&&(e={}),o["d"].getJson(t,this.buildRequest(e))},e.prototype.buildRequest=function(t){void 0===t&&(t={});var e={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(e["start_date"]=this.startDate,e["end_date"]=this.endDate),this.quarter&&(e["quarter"]=this.quarter),Object(r["a"])(Object(r["a"])({},e),t)},e.getReportQuarters=function(t){void 0===t&&(t=4);for(var e=[],n=i["a"].getCurrentYear(),r=0;r<t;++r)e.push({name:"Q4 "+n,start:n+"-10-01",end:n+"-12-31"}),e.push({name:"Q3 "+n,start:n+"-07-01",end:n+"-09-30"}),e.push({name:"Q2 "+n,start:n+"-04-01",end:n+"-06-30"}),e.push({name:"Q1 "+n,start:n+"-01-01",end:n+"-03-31"}),--n;return e},e}(o["d"])},fd0a:function(t,e,n){"use strict";n.r(e);var r=n("7a23");function o(t,e,n,o,i,a){var s=Object(r["resolveComponent"])("report-template"),c=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,itemsPerPage:10,period:t.period,onReportConfiguration:t.init,customBtns:t.customBtns,paginated:""},null,8,["title","rows","fields","columns","period","onReportConfiguration","customBtns"])]})),_:1})}n("4de4"),n("d81d");var i=n("9ab4"),a=n("fcd5"),s=n("552a"),c=n("9ceb"),u=n("9283"),d=n("44e3"),l=n("fe70"),p=Object(r["createTextVNode"])("Clinic Registration Report Summary"),b=Object(r["createTextVNode"])("X"),f=Object(r["createVNode"])("h3",null,"Type of Visit",-1),h=Object(r["createVNode"])("h3",null,"Count",-1);function m(t,e,n,o,i,a){var s=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-button"),u=Object(r["resolveComponent"])("ion-toolbar"),d=Object(r["resolveComponent"])("ion-header"),l=Object(r["resolveComponent"])("ion-col"),m=Object(r["resolveComponent"])("ion-row"),O=Object(r["resolveComponent"])("ion-item"),j=Object(r["resolveComponent"])("ion-list"),g=Object(r["resolveComponent"])("ion-grid"),v=Object(r["resolveComponent"])("ion-content");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[p]})),_:1}),Object(r["createVNode"])(c,{color:"danger",slot:"end",onClick:e[1]||(e[1]=function(e){return t.closeModal()})},{default:Object(r["withCtx"])((function(){return[b]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(v,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[f]})),_:1}),Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[h]})),_:1})]})),_:1}),Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.list,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:t},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.value),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})],64)}var O=Object(r["defineComponent"])({props:{list:Object},setup:function(){var t=this,e=function(){return Object(i["b"])(t,void 0,void 0,(function(){return Object(i["d"])(this,(function(t){switch(t.label){case 0:return[4,l["g"].dismiss()];case 1:return[2,t.sent()]}}))}))};return{closeModal:e}}}),j=n("d959"),g=n.n(j);const v=g()(O,[["render",m]]);var _=v,C=n("8a30"),D=Object(r["defineComponent"])({components:{ReportTemplate:s["a"],IonPage:C["B"]},mixins:[d["a"]],data:function(){return{title:"Clinic Registration",rows:[],reportData:[],columns:[[c["a"].thTxt("Reg"),c["a"].thTxt("First Name"),c["a"].thTxt("Last Name"),c["a"].thTxt("Gender"),c["a"].thTxt("DOB"),c["a"].thTxt("Date reg.")]],customBtns:[]}},created:function(){var t=this;this.fields=this.getDateDurationFields(),this.customBtns.push({name:"High level view",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return Object(i["b"])(t,void 0,void 0,(function(){return Object(i["d"])(this,(function(t){return[2,this.showModal()]}))}))}})},methods:{init:function(t,e){return Object(i["b"])(this,void 0,void 0,(function(){var t,n;return Object(i["d"])(this,(function(r){switch(r.label){case 0:return t=new a["d"],t.setStartDate(e.start_date),t.setEndDate(e.end_date),this.period=t.getDateIntervalPeriod(),[4,t.getClinicRegistrations()];case 1:return n=r.sent(),this.reportData=n.sort((function(t,e){return t.visit_type>e.visit_type?1:t.visit_type<e.visit_type?-1:0})),this.rows=this.buildRows(this.reportData),[2]}}))}))},buildRows:function(t){return t.length?t.map((function(t){return[c["a"].td(t.visit_type),c["a"].td(t.given_name),c["a"].td(t.family_name),c["a"].td(t.gender),c["a"].td(u["a"].toStandardHisDisplayFormat(t.birthdate)),c["a"].td(u["a"].toStandardHisDisplayFormat(t.visit_date))]})):[]},showModal:function(){return Object(i["b"])(this,void 0,void 0,(function(){var t,e;return Object(i["d"])(this,(function(n){switch(n.label){case 0:return t=[{label:"New patient",value:Object(i["f"])(this.reportData.filter((function(t){return"New patient"===t.visit_type}))).length},{label:"Referral",value:Object(i["f"])(this.reportData.filter((function(t){return"Referral"===t.visit_type}))).length},{label:"Revisiting",value:Object(i["f"])(this.reportData.filter((function(t){return"Revisiting"===t.visit_type}))).length}],[4,l["g"].create({component:_,backdropDismiss:!0,cssClass:"action-sheet-modal",componentProps:{list:t}})];case 1:return e=n.sent(),e.present(),[2]}}))}))}}});const w=g()(D,[["render",o]]);e["default"]=w}}]);
//# sourceMappingURL=chunk-eed33bb6.3e59b63c.js.map