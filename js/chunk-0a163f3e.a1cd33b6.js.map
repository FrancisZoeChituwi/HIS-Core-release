{"version":3,"sources":["webpack:///./src/apps/OPD/views/encounters/Prescription.vue?a71d","webpack:///./src/apps/OPD/services/drug_prescription_service.ts","webpack:///./src/apps/OPD/components/PrescriptionModal.vue?51ab","webpack:///./src/apps/OPD/components/FrequencyCard.vue?2048","webpack:///./src/apps/OPD/components/FrequencyCard.vue","webpack:///./src/apps/OPD/components/FrequencyCard.vue?e558","webpack:///./src/components/Keyboard/HisIntervalKeyboard.vue?7cba","webpack:///./src/components/Keyboard/HisIntervalKeyboard.vue","webpack:///./src/components/Keyboard/HisIntervalKeyboard.vue?ad05","webpack:///./src/apps/OPD/components/PrescriptionModal.vue","webpack:///./src/apps/OPD/components/PrescriptionModal.vue?0287","webpack:///./src/apps/OPD/views/encounters/Prescription.vue","webpack:///./src/apps/OPD/views/encounters/Prescription.vue?b134","webpack:///./src/apps/OPD/components/FrequencyCard.vue?a5ed","webpack:///./src/components/Keyboard/HisIntervalKeyboard.vue?522a","webpack:///./src/apps/OPD/components/PrescriptionModal.vue?ba65"],"names":["_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","cancelDestinationPath","cancelDestination","fields","activeField","onFinishAction","onSubmit","DRUG_DOSE_FREQUENCIES","1","2","3","4","ANTI_MALARIA_DRUGS","patientID","providerID","drugs","loadDrugs","filter","this","DrugPrescriptionService","getJson","name","getDrugOptions","map","drug","label","value","other","hasMalaria","getMalariaTestResult","malariaTestResult","getMalariaDiagnosis","malariaDiagnosis","getFirstValueCoded","getFirstValueText","createDrugOrder","drugOrders","create","encounterID","_withId","_hoisted_1","_hoisted_2","class","_hoisted_3","_hoisted_4","_component_ion_title","_component_ion_toolbar","_component_ion_header","_component_ion_label","_component_ion_item","_component_ion_list","_component_ion_col","_component_frequency_card","_component_ion_row","_component_interval_keyboard","_component_ion_grid","_component_ion_content","_component_ion_button","_component_ion_footer","default","_","style","overflowY","background","size","height","borderRight","index","key","detail","onClick","activeIndex","color","instructions","Object","keys","frequencies","title","status","$event","setFrequency","unit","onOnValue","setDuration","closeModal","slot","savePrescriptions","_component_ion_card_subtitle","_component_ion_card_content","_component_ion_card","active","src","icon","alt","cardTitle","props","type","String","required","Boolean","components","IonCard","IonCardContent","IonCardSubtitle","setup","Strings","capitalizeFirstLetter","__exports__","_component_his_keyboard","ranges","range","generateKeypad","start","end","keyboard","kbConfig","onKeyPress","disabled","HisKeyboard","IonRow","IonCol","IonList","IonItem","IonLabel","emits","emit","text","numbers","row","counter","i","push","findIndex","r","prescribedDrugs","d","duration","frequency","morning","noon","evening","night","getFrequencyCount","values","length","drugname","freq","parseInt","isComplete","dismiss","IonContent","IonButton","IonHeader","IonTitle","IonToolbar","FrequencyCard","IntervalKeyboard","HisStandardForm","mixins","EncounterMixin","data","prescriptionService","watch","ready","handler","isReady","getFields","immediate","deep","methods","createEncounter","encounter","drugOrder","nextTask","getPrescriptionDetails","component","PrescriptionModal","backdropDismiss","cssClass","componentProps","modal","present","onDidDismiss","calculateExpireDate","startDate","date","Date","setDate","getDate","toStandardHisFormat","mapToOrders","prescriptions","getSessionDate","frequencyCount","drug_id","dose_strength","units","id","helpText","TT_MULTIPLE_SELECT","validation","options","onload","beforeNext","config","showKeyboard","footerBtns","visible","ok","TT_SELECT","condition","onValue"],"mappings":"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","file":"js/chunk-0a163f3e.a1cd33b6.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n\n  return (_openBlock(), _createBlock(_component_his_standard_form, {\n    cancelDestinationPath: _ctx.cancelDestination,\n    fields: _ctx.fields,\n    activeField: _ctx.activeField,\n    onFinishAction: _ctx.onSubmit\n  }, null, 8, [\"cancelDestinationPath\", \"fields\", \"activeField\", \"onFinishAction\"]))\n}","import { ConceptName } from \"@/interfaces/conceptName\";\nimport { DrugInterface } from \"@/interfaces/Drug\";\nimport { AppEncounterService } from \"@/services/app_encounter_service\"\nimport { DrugOrderService } from \"@/services/drug_order_service\";\nimport { isEmpty } from \"lodash\";\n\nexport const DRUG_DOSE_FREQUENCIES: Record<number, string> = {\n  1: \"OD\", \n  2: \"BD\",\n  3: \"TDS\", \n  4: \"QID\"\n}\n\nexport const ANTI_MALARIA_DRUGS = [\n  {\n    'drug_id': 236,\n    'duration': 3,\n    'tabs': 6,\n    'name': \"Lumefantrine + Arthemether 1 x 6\",\n    'dose_strength': 1.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 237,\n    'duration': 3,\n    'tabs': 12,\n    'name': \"Lumefantrine + Arthemether 2 x 6\",\n    'dose_strength': 2.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 238,\n    'duration': 3,\n    'tabs': 18,\n    'name': \"Lumefantrine + Arthemether 3 x 6\",\n    'dose_strength': 3.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 239,\n    'duration': 3,\n    'tabs': 24,\n    'name': \"Lumefantrine + Arthemether 4 x 6\",\n    'dose_strength': 4.0,\n    'units': \"tabs\",\n    'frequency': 2\n  }\n];\n\nexport class DrugPrescriptionService extends AppEncounterService {\n  drugs: ConceptName[] = [];\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 25, providerID) \n  }\n  async loadDrugs(filter = '') {\n    this.drugs = await DrugPrescriptionService.getJson('drugs', {\n      'page_size': 1000000,\n      name: filter\n    })\n  }\n  getDrugOptions() {\n    if(isEmpty(this.drugs)) return []\n    return this.drugs.map(drug => ({\n      label: drug.name, value: drug.name, other: drug\n    }))\n  }\n  async hasMalaria() {\n    const malariaTestResult = await this.getMalariaTestResult()\n    if(malariaTestResult) return true\n    const malariaDiagnosis = await this.getMalariaDiagnosis()\n    if(malariaDiagnosis) return true\n    return false\n  }\n  async getMalariaTestResult() {\n    let malariaTestResult = await AppEncounterService.getFirstValueCoded(this.patientID, 'Malaria Test Result')   \n    if(malariaTestResult) return malariaTestResult\n    malariaTestResult = await AppEncounterService.getFirstValueText(this.patientID, 'Malaria Test Result')\n    if(malariaTestResult) return malariaTestResult\n    return null\n  }\n  async getMalariaDiagnosis() {\n    return AppEncounterService.getFirstValueCoded(this.patientID, 'Malaria')\n  }\n  createDrugOrder(drugOrders: Array<DrugInterface>){\n    return DrugOrderService.create({\n      'encounter_id': this.encounterID,\n      'drug_orders': drugOrders\n    })\n  }\n}","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-586626f5\")\n\n_pushScopeId(\"data-v-586626f5\")\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Complete prescription details\")\nconst _hoisted_2 = { class: \"side-title\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Close \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Save \")\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_list = _resolveComponent(\"ion-list\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_frequency_card = _resolveComponent(\"frequency-card\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_interval_keyboard = _resolveComponent(\"interval-keyboard\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withId(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withId(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { style: { overflowY: 'hidden', background: 'grey' } }, {\n      default: _withId(() => [\n        _createVNode(_component_ion_grid, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withId(() => [\n                _createVNode(_component_ion_col, { size: \"4\" }, {\n                  default: _withId(() => [\n                    _createVNode(_component_ion_list, { style: {overflowY: 'auto', height:'78vh', borderRight: 'solid 1px #ccc'} }, {\n                      default: _withId(() => [\n                        (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.drugs, (drug, index) => {\n                          return (_openBlock(), _createBlock(_component_ion_item, {\n                            key: drug,\n                            detail: true,\n                            onClick: () => _ctx.activeIndex = index,\n                            color: _ctx.activeIndex === index ? 'light' : ''\n                          }, {\n                            default: _withId(() => [\n                              _createVNode(_component_ion_label, null, {\n                                default: _withId(() => [\n                                  _createTextVNode(_toDisplayString(drug.name), 1 /* TEXT */)\n                                ]),\n                                _: 2\n                              }, 1024)\n                            ]),\n                            _: 2\n                          }, 1032, [\"onClick\", \"color\"]))\n                        }), 128 /* KEYED_FRAGMENT */))\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, { style: {overflowY: 'auto', height:'78vh'} }, {\n                  default: _withId(() => [\n                    (_ctx.activeIndex >= 0)\n                      ? (_openBlock(), _createBlock(_Fragment, { key: 0 }, [\n                          _createVNode(\"div\", _hoisted_2, _toDisplayString(_ctx.instructions), 1),\n                          _createVNode(_component_ion_row, { class: \"frequencies\" }, {\n                            default: _withId(() => [\n                              (_openBlock(true), _createBlock(_Fragment, null, _renderList(Object.keys(_ctx.frequencies), (key) => {\n                                return (_openBlock(), _createBlock(_component_ion_col, { key: key }, {\n                                  default: _withId(() => [\n                                    _createVNode(_component_frequency_card, {\n                                      title: key,\n                                      status: _ctx.frequencies[key],\n                                      onClick: $event => (_ctx.setFrequency(key))\n                                    }, null, 8, [\"title\", \"status\", \"onClick\"])\n                                  ]),\n                                  _: 2\n                                }, 1024))\n                              }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _: 1\n                          }),\n                          _createVNode(_component_interval_keyboard, {\n                            unit: \"days\",\n                            title: \"Select Duration\",\n                            onOnValue: _ctx.setDuration\n                          }, null, 8, [\"onOnValue\"])\n                        ], 64 /* STABLE_FRAGMENT */))\n                      : _createCommentVNode(\"\", true)\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withId(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.closeModal,\n              slot: \"start\",\n              color: \"danger\",\n              style: {\"margin-left\":\"1rem\"}\n            }, {\n              default: _withId(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            }, 8, [\"onClick\"]),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.savePrescriptions,\n              slot: \"end\",\n              style: {\"margin-right\":\"1rem\"}\n            }, {\n              default: _withId(() => [\n                _hoisted_4\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n})","import { createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, withScopeId as _withScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-0dd8dfe4\")\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_card_subtitle = _resolveComponent(\"ion-card-subtitle\")\n  const _component_ion_card_content = _resolveComponent(\"ion-card-content\")\n  const _component_ion_card = _resolveComponent(\"ion-card\")\n\n  return (_openBlock(), _createBlock(_component_ion_card, {\n    class: [\"his-card clickable\", { active: _ctx.status }]\n  }, {\n    default: _withId(() => [\n      _createVNode(\"img\", {\n        src: _ctx.icon,\n        alt: _ctx.title,\n        height: \"65\"\n      }, null, 8, [\"src\", \"alt\"]),\n      _createVNode(_component_ion_card_content, null, {\n        default: _withId(() => [\n          _createVNode(_component_ion_card_subtitle, {\n            color: _ctx.status ? 'primary': ''\n          }, {\n            default: _withId(() => [\n              _createTextVNode(_toDisplayString(_ctx.cardTitle), 1 /* TEXT */)\n            ]),\n            _: 1\n          }, 8, [\"color\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"class\"]))\n})","\nimport { computed, defineComponent } from 'vue'\nimport Strings from '../utils/Strings'\nimport { IonCard, IonCardContent, IonCardSubtitle } from \"@ionic/vue\";\n\nexport default defineComponent({\n  props: {\n    title: {\n      type: String,\n      required: true\n    },\n    status: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: { IonCard, IonCardContent, IonCardSubtitle },\n  setup(props) {\n    const cardTitle = computed(() => Strings.capitalizeFirstLetter(props.title))\n    const icon = computed(() => `/assets/images/prescription/${props.title}.png`)\n\n    return {\n      cardTitle,\n      icon,\n    }\n  },\n})\n","import { render } from \"./FrequencyCard.vue?vue&type=template&id=0dd8dfe4&scoped=true&ts=true\"\nimport script from \"./FrequencyCard.vue?vue&type=script&lang=ts\"\nexport * from \"./FrequencyCard.vue?vue&type=script&lang=ts\"\n\nimport \"./FrequencyCard.vue?vue&type=style&index=0&id=0dd8dfe4&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0dd8dfe4\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withScopeId as _withScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-5bd3374e\")\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_list = _resolveComponent(\"ion-list\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_his_keyboard = _resolveComponent(\"his-keyboard\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n\n  return (_openBlock(), _createBlock(_component_ion_row, { class: \"ion-margin-vertical border\" }, {\n    default: _withId(() => [\n      _createVNode(_component_ion_col, { size: \"4\" }, {\n        default: _withId(() => [\n          _createVNode(_component_ion_list, null, {\n            default: _withId(() => [\n              _createVNode(_component_ion_item, null, {\n                default: _withId(() => [\n                  _createVNode(_component_ion_label, null, {\n                    default: _withId(() => [\n                      _createTextVNode(_toDisplayString(_ctx.title), 1 /* TEXT */)\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.ranges, (range, index) => {\n                return (_openBlock(), _createBlock(_component_ion_item, {\n                  key: range,\n                  color: _ctx.activeIndex === index ? 'light': '',\n                  detail: true,\n                  onClick: $event => (_ctx.generateKeypad(range))\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_ion_label, null, {\n                      default: _withId(() => [\n                        _createTextVNode(_toDisplayString(range.start + ' - ' + range.end + ' ' + _ctx.unit), 1 /* TEXT */)\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ]),\n                  _: 2\n                }, 1032, [\"color\", \"onClick\"]))\n              }), 128 /* KEYED_FRAGMENT */))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      (_ctx.keyboard)\n        ? (_openBlock(), _createBlock(_component_ion_col, { key: 0 }, {\n            default: _withId(() => [\n              _createVNode(_component_his_keyboard, {\n                kbConfig: _ctx.keyboard,\n                onKeyPress: _ctx.onKeyPress,\n                disabled: false,\n                style: {\"border\":\"0\"}\n              }, null, 8, [\"kbConfig\", \"onKeyPress\"])\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n})","\nimport { defineComponent, onMounted, ref } from 'vue'\nimport HisKeyboard from \"@/components/Keyboard/HisKeyboard.vue\";\nimport { IonRow, IonCol, IonList, IonItem, IonLabel } from \"@ionic/vue\";\n\nexport default defineComponent({\n  props: {\n    unit: {\n      type: String,\n      default: ''\n    },\n    title: {\n      type: String,\n      default: 'Select Numbers'\n    }\n  },\n  components: { \n    HisKeyboard, \n    IonRow, \n    IonCol, \n    IonList, \n    IonItem, \n    IonLabel\n  },\n  emits: ['onValue'],\n  setup(_, { emit }) {\n    const ranges = ref([\n      {start: 1, end: 20},\n      {start: 21, end: 40},\n      {start: 41, end: 60},\n      {start: 61, end: 80}\n    ])\n    const activeIndex = ref(0)\n    const keyboard = ref<Array<any>>()\n    const onKeyPress = (text: any) => emit('onValue', text)\n    const generateKeypad = (range: any) => {\n      const numbers: string[][] = [[]]\n      let row = 0\n      let counter = 0     \n      for (let i = range.start; i <= range.end; i++){\n        if(counter > 4) {\n          ++row\n          numbers[row] = [],\n          counter = 0\n        }\n        numbers[row].push(`${i}`)\n        ++counter\n      }\n      keyboard.value =  [numbers, []]\n      activeIndex.value = ranges.value.findIndex(r => r.start === range.start)\n    }\n    onMounted(() => generateKeypad(ranges.value[0]))\n    return {\n      keyboard,\n      onKeyPress,\n      generateKeypad,\n      ranges,\n      activeIndex,\n    }\n  },\n})\n","import { render } from \"./HisIntervalKeyboard.vue?vue&type=template&id=5bd3374e&scoped=true&ts=true\"\nimport script from \"./HisIntervalKeyboard.vue?vue&type=script&lang=ts\"\nexport * from \"./HisIntervalKeyboard.vue?vue&type=script&lang=ts\"\n\nimport \"./HisIntervalKeyboard.vue?vue&type=style&index=0&id=5bd3374e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bd3374e\"]])\n\nexport default __exports__","\nimport {\n  IonContent,\n  IonButton,\n  IonHeader,\n  IonTitle,\n  IonToolbar,\n  IonLabel,\n  modalController,\n  IonList,\n  IonItem,\n  IonRow,\n} from \"@ionic/vue\";\nimport { computed, defineComponent, PropType, ref} from \"vue\";\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport FrequencyCard from \"./FrequencyCard.vue\";\nimport IntervalKeyboard from \"@/components/Keyboard/HisIntervalKeyboard.vue\";\nimport { toastWarning } from \"@/utils/Alerts\";\n\nexport default defineComponent({\n  name: \"PrescriptionModal\",\n  props: {\n    prescribedDrugs: {\n      type: Object as PropType<Option[]>, \n      required: true\n    },\n  },\n  setup (props) {\n    const activeIndex = ref(-1)  \n    const drugs = computed(() => props.prescribedDrugs.map(d => {\n      const drug = d.other\n      drug.duration = 0\n      drug.frequency = {\n        morning: false,\n        noon: false,\n        evening: false,\n        night: false,\n      }\n      return drug\n    }))\n    const getFrequencyCount = (frequency: Record<string, boolean>) => {\n      return Object.values(frequency).filter(value => value).length\n    }\n    const instructions = computed(() => {\n      if(activeIndex.value < 0) return ''\n      const drugname = drugs.value[activeIndex.value].name\n      const freq = getFrequencyCount(drugs.value[activeIndex.value].frequency)\n      const duration = drugs.value[activeIndex.value].duration\n      return `${drugname}, ${freq} time(s) a day, for ${duration} day(s)` \n    })\n    const frequencies = computed(() => {\n      if(activeIndex.value < 0) return {}\n      return drugs.value[activeIndex.value].frequency\n    })\n    const setFrequency = (index: string) => {\n      drugs.value[activeIndex.value].frequency[index] = !drugs.value[activeIndex.value].frequency[index]\n    }\n    const setDuration = (text: string) => {\n      drugs.value[activeIndex.value].duration = parseInt(text)\n    }\n    const isComplete = () => {\n      for (const drug of drugs.value) {\n        const freq = getFrequencyCount(drug.frequency)\n        const duration: number = drug.duration\n        if(!freq  || !duration){\n          toastWarning(`complete prescription details for ${drug.name}`)\n          return false\n        }\n      }\n      return true\n    }\n    const savePrescriptions = () => {\n      if(isComplete()) {\n        modalController.dismiss(drugs.value)\n      }\n    }\n    const closeModal = () => modalController.dismiss()\n    return {\n      drugs,\n      activeIndex,\n      instructions,\n      frequencies,\n      closeModal,\n      setFrequency,\n      setDuration,\n      savePrescriptions,\n    }\n  },\n  components: {\n    IonContent,\n    IonButton,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonLabel,\n    IonList,\n    IonItem,\n    IonRow,\n    FrequencyCard,\n    IntervalKeyboard\n},\n});\n","import { render } from \"./PrescriptionModal.vue?vue&type=template&id=586626f5&scoped=true&ts=true\"\nimport script from \"./PrescriptionModal.vue?vue&type=script&lang=ts\"\nexport * from \"./PrescriptionModal.vue?vue&type=script&lang=ts\"\n\nimport \"./PrescriptionModal.vue?vue&type=style&index=0&id=586626f5&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-586626f5\"]])\n\nexport default __exports__","\nimport { defineComponent} from 'vue'\nimport HisStandardForm from \"@/components/Forms/TouchScreenForm.vue\";\nimport EncounterMixinVue from '@/views/EncounterMixin.vue';\nimport Validation from '@/components/Forms/validations/StandardValidations';\nimport { Field, Option } from '@/components/Forms/FieldInterface';\nimport { FieldType } from '@/components/Forms/BaseFormElements';\nimport { isEmpty } from 'lodash';\nimport { ANTI_MALARIA_DRUGS, DrugPrescriptionService, DRUG_DOSE_FREQUENCIES } from '../../services/drug_prescription_service';\nimport { modalController } from '@ionic/core';\nimport PrescriptionModalVue from '@/apps/OPD/components/PrescriptionModal.vue';\nimport HisDate from \"@/utils/Date\"\nimport { alertConfirmation, toastSuccess, toastWarning } from '@/utils/Alerts';\n\nexport default defineComponent({\n  components: { HisStandardForm },\n  mixins: [EncounterMixinVue],\n  data: () => ({\n    activeField: '',\n    prescriptionService: {} as any,\n    hasMalaria: false,\n    drugOrders: [] as any\n  }),\n  watch: {\n    ready: {\n      async handler(isReady: boolean) {\n        if(isReady){\n          this.prescriptionService = new DrugPrescriptionService(this.patientID, this.providerID)\n          await this.prescriptionService.loadDrugs()    \n          this.hasMalaria = await this.prescriptionService.hasMalaria()\n          this.fields = this.getFields()\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    async onSubmit(){   \n      const encounter = await this.prescriptionService.createEncounter()\n      if (!encounter) return toastWarning('Unable to create treatment encounter')   \n      const drugOrder = await this.prescriptionService.createDrugOrder(this.drugOrders);\n      if(!drugOrder) return toastWarning('Unable to create drug orders!')\n      toastSuccess('Drug order has been created')\n      this.nextTask()       \n    },\n    async getPrescriptionDetails(prescribedDrugs: Option[]) {\n      const modal = await modalController.create({\n        component: PrescriptionModalVue,\n        backdropDismiss: false,\n        cssClass: \"large-modal\",\n        componentProps: {\n          prescribedDrugs\n        }\n      });\n      modal.present();\n      const { data } = await modal.onDidDismiss();\n      return data\n    },\n    getFrequencyCount(frequency: Record<string, boolean>) {\n      return Object.values(frequency).filter(value => value).length\n    },\n    calculateExpireDate(startDate: string | Date, duration: number ) {\n      const date = new Date(startDate)\n      date.setDate(date.getDate() + duration)\n      return HisDate.toStandardHisFormat(date)\n    },\n    mapToOrders(prescriptions: any[]): any[] {\n      return prescriptions.map(drug => {\n        const startDate = DrugPrescriptionService.getSessionDate()\n        const frequencyCount = (typeof drug.frequency === 'number') ? drug.frequency :  this.getFrequencyCount(drug.frequency)\n        const frequency = DRUG_DOSE_FREQUENCIES[frequencyCount]\n        return {\n          'drug_inventory_id': drug.drug_id,\n          'equivalent_daily_dose': drug.dose_strength * frequencyCount,\n          'start_date': startDate,\n          'auto_expire_date': this.calculateExpireDate(startDate, drug.duration), \n          'units': drug.units,\n          'instructions': `${drug.name}: ${frequencyCount} ${frequency} for ${drug.duration}`,\n          'dose': drug.dose_strength,\n          'frequency': frequency\n        }\n      })\n    },\n    getFields(): Array<Field>{\n      return [\n        {\n          id: 'drugs',\n          helpText: 'Select drugs',\n          type: FieldType.TT_MULTIPLE_SELECT,\n          validation: (data: any) => Validation.required(data),\n          options: () => this.prescriptionService.getDrugOptions(),\n          onload: () => this.activeField = '',\n          beforeNext: async (data: Option[]) => {\n            const prescriptions = await this.getPrescriptionDetails(data)\n            if(isEmpty(prescriptions)) return false\n            this.drugOrders = this.mapToOrders(prescriptions)\n            return true\n          },\n          config: {\n            showKeyboard: true,\n            footerBtns: [\n              {\n                name: 'Predefined Malaria Drugs',\n                color: 'primary',\n                size: 'large',\n                visible: false,\n                slot: 'end',\n                onClick: async () => {\n                  if(this.hasMalaria) this.activeField = 'malaria_drugs'\n                  const ok = await alertConfirmation('Patient has no malaria. Do you still want to prescribe anti malaria drugs?')\n                  if(ok) this.activeField = 'malaria_drugs'\n                }\n              },\n            ]\n          }\n        },\n        {\n          id: 'malaria_drugs',\n          helpText: \"select Malaria Drugs\",\n          validation: (data: any) => Validation.required(data),\n          type: FieldType.TT_SELECT,\n          condition: () => this.activeField === 'malaria_drugs',\n          onValue: (data: Option) => {\n            if(isEmpty(data)) return false\n            this.drugOrders = this.mapToOrders([data.other])\n            return true\n          },\n          options: () => ANTI_MALARIA_DRUGS.map(drug => ({\n            label: `${drug.name}, ${drug.frequency} time(s) a day, for ${drug.duration} days`,\n            value: drug.name,\n            other: drug\n          }))\n        }\n      ]\n    }\n  }\n})\n","import { render } from \"./Prescription.vue?vue&type=template&id=7d9a3f5c&ts=true\"\nimport script from \"./Prescription.vue?vue&type=script&lang=ts\"\nexport * from \"./Prescription.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FrequencyCard.vue?vue&type=style&index=0&id=0dd8dfe4&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HisIntervalKeyboard.vue?vue&type=style&index=0&id=5bd3374e&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PrescriptionModal.vue?vue&type=style&index=0&id=586626f5&scoped=true&lang=css\""],"sourceRoot":""}