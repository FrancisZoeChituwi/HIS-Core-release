(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e7b5"],{d66c:function(e,t,n){"use strict";n.r(t);var i=n("7a23");function r(e,t,n,r,o,a){var u=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(u,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}n("4160"),n("b64b"),n("d3b7"),n("ac1f"),n("3ca3"),n("466d"),n("159b"),n("ddb0");var o=n("9ab4"),a=n("d95e"),u=n("7920"),s=n("2706"),c=n("7365"),l=n("cc6f"),d=function(e){function t(t,n){return e.call(this,t,186,n)||this}return Object(o["c"])(t,e),t}(l["a"]),f=n("b5e4"),p=n("e86e"),b=Object(i["defineComponent"])({mixins:[c["a"]],components:{HisStandardForm:u["a"]},data:function(){return{screeningResult:{},obs:[],currentMethod:""}},watch:{patient:{handler:function(){return Object(o["b"])(this,void 0,void 0,(function(){var e;return Object(o["d"])(this,(function(t){switch(t.label){case 0:return this.screeningResult=new d(this.patientID,this.providerID),e=this,[4,this.getTreatmentOptions()];case 1:return e.currentMethod=t.sent(),this.fields=this.getFields(),[2]}}))}))},deep:!0}},methods:{onFinish:function(e,t){return Object(o["b"])(this,void 0,void 0,(function(){var n,i,r;return Object(o["d"])(this,(function(a){switch(a.label){case 0:return[4,this.screeningResult.createEncounter()];case 1:return n=a.sent(),n?(e.treatment_option&&"Referral"===e.treatment_option.value&&this.obs.push(this.screeningResult.buildValueText("Referral location",e["location"].label)),i=[],Object.keys(t).forEach((function(e){i.push(t[e].obs)})),[4,Promise.all(Object(o["f"])(this.obs,i))]):[2,Object(f["e"])("Unable to create encounter")];case 2:return r=a.sent(),[4,this.screeningResult.saveObservationList(r)];case 3:return a.sent(),Object(f["d"])("Observations and encounter created!"),this.nextTask(),[2]}}))}))},getFacilities:function(e){return void 0===e&&(e=""),Object(p["b"])(e)},getTreatmentOptions:function(){return Object(o["b"])(this,void 0,void 0,(function(){return Object(o["d"])(this,(function(e){switch(e.label){case 0:return[4,this.screeningResult.getFirstValueCoded("CxCa screening method")];case 1:return[2,e.sent()]}}))}))},getOptions:function(e){return e||(Object(f["e"])("No screening methods have been selected"),this.gotoPatientDashboard()),e.match(/via/i)?["VIA Negative","VIA Positive","Suspect Cancer"]:e.match(/smear/i)?["PAP Smear Normal","PAP Smear Abnormal"]:e.match(/HPV DNA/i)?["HPV positive","HPV negative"]:e.match(/Speculum/i)?["Visible Lesion","No visible Lesion","Other Gynae"]:[]},getFields:function(){var e=this;return[{id:"screening_result",helpText:"Screening Result",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.mapOptions(Object(o["f"])(e.getOptions(e.currentMethod)))},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("Patient went for VIA?",t.value)}}},{id:"offer_via",helpText:"Offer VIA",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.yesNoOptions()},condition:function(e){return"HPV Positive"===e.screening_result.value},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("Patient went for VIA?",t.value)}}},{id:"via_screening_results",helpText:"VIA screening results",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.mapOptions(["VIA negative","VIA positive","Suspect cancer"])},condition:function(e){return"Yes"===e.offer_via.value},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("VIA Results",t.value)}}},{id:"reason_for_not_offering_via",helpText:"Reason for NOT offering VIA",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.mapOptions(["Client NOT ready","Treatment not available","Other conditions"])},condition:function(e){return"No"===e.offer_via.value},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("Other reason for not seeking services",t.value)}}},{id:"treatment_option",helpText:"Enter treatment option",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.mapOptions(["Same day treatment","Postponed treatment","Referral"])},condition:function(e){return"VIA Positive"===e.screening_result.value},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("Directly observed treatment option",t.value)}}},{id:"postponed_reason",helpText:"Select reason for postponing treatment",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.mapOptions(["Client not ready","Treatment not available","Other conditions"])},condition:function(e){return"Postponed treatment"===e.treatment_option.value},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("Postponed reason",t.value)}}},{id:"referral_rreason",helpText:"Referral reason",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return e.mapOptions(["Further Investigation and Management","Large Lesion (Greater than 75 percent)","Suspect cancer","Unable to treaat client","Treatment not available","Other conditions"])},condition:function(e){return"Referral"===e.treatment_option.value},computedValue:function(t){return{obs:e.screeningResult.buildValueCoded("Referral reason",t.value)}}},{id:"location",helpText:"Location reffered from",type:a["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(t,n){return void 0===n&&(n=""),e.getFacilities(n)},config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:function(e){return"Referral"===e.treatment_option.value},computedValue:function(t){return{obs:e.screeningResult.buildValueText("Referral location",t.label)}}}]}}}),h=n("d959"),v=n.n(h);const m=v()(b,[["render",r]]);t["default"]=m}}]);
//# sourceMappingURL=chunk-2d21e7b5.fec8a2fd.js.map