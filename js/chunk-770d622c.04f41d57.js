(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-770d622c"],{c7512:function(e,t,n){"use strict";n.r(t);var i=n("7a23");function r(e,t,n,r,a,o){var u=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(u,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var a=n("9ab4"),o=n("9441"),u=n("7365"),c=n("cc6f"),s=function(e){function t(t,n){return e.call(this,t,104,n)||this}return Object(a["c"])(t,e),t}(c["a"]),l=n("1c74"),d=function(e){function t(){return e.call(this)||this}return Object(a["c"])(t,e),t.create=function(t,n,i){return e.postJson.call(this,"patient_identifiers",{identifier:i,identifier_type:n,patient_id:t})},t}(l["d"]),f=n("2706"),b=n("d95e"),v=n("e86e"),p=n("b5e4"),h=Object(i["defineComponent"])({components:{HisStandardForm:o["a"]},mixins:[u["a"]],data:function(){return{registrationService:{}}},watch:{ready:{handler:function(e){return Object(a["b"])(this,void 0,void 0,(function(){return Object(a["d"])(this,(function(t){return e&&(this.registrationService=new s(this.patient.getID(),this.providerID),this.fields=this.getFields()),[2]}))}))},immediate:!0,deep:!0}},methods:{onSubmit:function(e,t){return Object(a["b"])(this,void 0,void 0,(function(){var n,i,r;return Object(a["d"])(this,(function(o){switch(o.label){case 0:return[4,this.asignNID(e)];case 1:return o.sent(),[4,this.registrationService.createEncounter()];case 2:return n=o.sent(),n?[4,this.resolveObs(Object(a["a"])({},t))]:[2,Object(p["e"])("Unable to create registration encounter")];case 3:return i=o.sent(),[4,this.registrationService.saveObservationList(i)];case 4:return r=o.sent(),r?(this.nextTask(),[2]):[2,Object(p["e"])("Unable to save observations")]}}))}))},asignNID:function(e){return Object(a["b"])(this,void 0,void 0,(function(){var t,n;return Object(a["d"])(this,(function(i){switch(i.label){case 0:return t=e["national_id_available"],n=e["national_id"],t&&"Yes"===t["value"]?[4,d.create(this.patient.getID(),28,n["value"])]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},getFields:function(){var e=this;return[{id:"visit_type",helpText:"Type of visit",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){var n=t.value;return{obs:e.registrationService.buildValueCoded("Type of visit",n)}},options:function(){return[{label:"New",value:"New patient"},{label:"Referral",value:"Referral"},{label:"Re-visiting",value:"Re-visiting"}]}},{id:"referring_facility_name",helpText:"Referred from",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){var n=t.label;return{obs:e.registrationService.buildValueText("Referred from",n)}},condition:function(e){return"Referral"===e.visit_type.value},options:function(){return Object(v["b"])("")},config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"national_id_available",helpText:"National ID avalable",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(){return"Unknown"===e.patient.findIdentifierByType("Malawi National ID")},options:function(){return e.yesNoUnknownOptions()},appearInSummary:function(){return!1}},{id:"national_id",helpText:"Enter National ID",type:b["b"].TT_TEXT,validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.national_id_available.value},summaryMapValue:function(e){var t=e.value;return{value:t,label:"National ID"}}},{id:"patient_pregnant",helpText:"Patient pregnant",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){var n=t.value;return{obs:e.registrationService.buildValueCoded("PATIENT PREGNANT",n)}},condition:function(){return e.patient.isChildBearing()},options:function(){return e.yesNoUnknownOptions()},config:{showKeyboard:!0,isFilterDataViaApi:!0}}]}}}),T=n("d959"),g=n.n(T);const m=g()(h,[["render",r]]);t["default"]=m}}]);
//# sourceMappingURL=chunk-770d622c.04f41d57.js.map