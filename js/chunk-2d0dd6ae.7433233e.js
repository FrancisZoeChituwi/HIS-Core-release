(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd6ae"],{"80ff":function(e,t,n){"use strict";n.r(t);var i=n("7a23");function r(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var a=n("9ab4"),o=n("9441"),c=n("7365"),s=n("2706"),u=n("d95e"),l=n("e86e"),d=n("cc6f"),f=function(e){function t(t,n){return e.call(this,t,114,n)||this}return Object(a["c"])(t,e),t}(d["a"]),v=function(e){function t(t,n){return e.call(this,t,42,n)||this}return Object(a["c"])(t,e),t}(d["a"]),b=Object(i["defineComponent"])({components:{HisStandardForm:o["a"]},mixins:[c["a"]],data:function(){return{referralService:{},admissionService:{}}},watch:{ready:{handler:function(e){return Object(a["b"])(this,void 0,void 0,(function(){return Object(a["d"])(this,(function(t){return e&&(this.referralService=new f(this.patientID,this.providerID),this.admissionService=new v(this.patientID,this.providerID),this.fields=this.getFields()),[2]}))}))},immediate:!0,deep:!0}},methods:{onSubmit:function(e,t){return Object(a["b"])(this,void 0,void 0,(function(){var n,i;return Object(a["d"])(this,(function(r){switch(r.label){case 0:return"Admission"!==e.opd_outcome.value?[3,4]:[4,this.admissionService.createEncounter()];case 1:return r.sent(),[4,this.resolveObs(Object(a["a"])({},t),"admission")];case 2:return n=r.sent(),[4,this.admissionService.saveObservationList(n)];case 3:return r.sent(),[3,8];case 4:return[4,this.referralService.createEncounter()];case 5:return r.sent(),[4,this.resolveObs(Object(a["a"])({},t),"referral")];case 6:return i=r.sent(),[4,this.referralService.saveObservationList(i)];case 7:r.sent(),r.label=8;case 8:return this.nextTask(),[2]}}))}))},getFields:function(){var e=this;return[{id:"opd_outcome",helpText:"Select outcome",type:u["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},options:function(){return[{label:"Admit",value:"Admission"},{label:"Internal referral",value:"Internal referral"},{label:"Refer to another hospital/clinic",value:"External referral"}]}},{id:"facility_name",helpText:"Select Facility name",type:u["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},computedValue:function(t){var n=t.value;return{tag:"referral",obs:e.referralService.buildValueText("Referred",n)}},condition:function(e){return"External referral"===e.opd_outcome.value},options:function(e,t){return void 0===t&&(t=""),Object(l["b"])(t)},config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"specialist_clinic",helpText:"Select clinic",type:u["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},computedValue:function(t){var n=t.other;return{tag:"referral",obs:e.referralService.buildValueCodedFromConceptId("Specialist clinic",n.concept_id)}},condition:function(e){return"Internal referral"===e.opd_outcome.value},options:function(){return Object(l["e"])()},config:{showKeyboard:!0}},{id:"wards",helpText:"Select ward",type:u["b"].TT_SELECT,condition:function(e){return"Admission"===e.opd_outcome.value},validation:function(e){return s["a"].required(e)},computedValue:function(t){var n=t.value;return{tag:"admission",obs:e.admissionService.buildValueText("Admit to ward",n)}},options:function(e,t){return void 0===t&&(t=""),Object(l["c"])(t)},config:{showKeyboard:!0,isFilterDataViaApi:!0}}]}}}),h=n("d959"),p=n.n(h);const m=p()(b,[["render",r]]);t["default"]=m}}]);
//# sourceMappingURL=chunk-2d0dd6ae.7433233e.js.map