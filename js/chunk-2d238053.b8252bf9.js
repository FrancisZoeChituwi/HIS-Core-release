(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d238053"],{fe31:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["createTextVNode"])(" Patient visit report "),o={class:"view-port-content"},a=Object(r["createTextVNode"])(" Finish ");function c(e,t,n,c,s,u){var d=Object(r["resolveComponent"])("his-standard-form"),l=Object(r["resolveComponent"])("ion-title"),h=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("ion-header"),p=Object(r["resolveComponent"])("apexchart"),f=Object(r["resolveComponent"])("view-port"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("ion-button"),w=Object(r["resolveComponent"])("ion-footer"),m=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["withDirectives"])(Object(r["createVNode"])(d,{onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[r["vShow"],!e.canShowReport]]),e.canShowReport?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[i]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(p,{width:e.width,height:e.height,type:e.chartType,options:e.chartOptions,series:e.series,onClick:e.pointSelection},null,8,["width","height","type","options","series","onClick"])])]})),_:1})]})),_:1}),Object(r["createVNode"])(w,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{color:"dark"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{slot:"end",size:"large","router-link":"/",color:"success"},{default:Object(r["withCtx"])((function(){return[a]})),_:1})]})),_:1})]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)}n("4de4"),n("d81d"),n("4fad"),n("b64b");var s=n("9ab4"),u=n("8a30"),d=n("0a79"),l=n("ad8d"),h=n("7920"),b=n("44e3"),p=n("2ef0"),f=Object(r["defineComponent"])({components:{IonPage:u["B"],IonHeader:u["q"],IonTitle:u["M"],IonToolbar:u["N"],IonContent:u["n"],IonFooter:u["o"],IonButton:u["d"],ViewPort:d["a"],HisStandardForm:h["a"]},mixins:[b["a"]],data:function(){return{chartType:"area",height:"100%",width:"100%",canShowReport:!1,report:{},series:[],patientPresent:{},guardianPresent:{},bothPresent:{},chartOptions:{title:{text:"HIV Reception encounters"},yaxis:{title:{text:"Number of clients"},plotAreaHeight:800},xaxis:{type:"datetime"}}}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){return Object(s["b"])(this,void 0,void 0,(function(){var e;return Object(s["d"])(this,(function(n){switch(n.label){case 0:return[4,this.presentLoading()];case 1:return n.sent(),this.canShowReport=!0,this.report=new l["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),[4,this.report.getPatientVisitTypes()];case 2:return e=n.sent(),this.series=this.buildSeries(e),u["S"].dismiss(),[2]}}))}))},presentLoading:function(){return Object(s["b"])(this,void 0,void 0,(function(){var e;return Object(s["d"])(this,(function(t){switch(t.label){case 0:return[4,u["S"].create({message:"Please wait...",backdropDismiss:!1})];case 1:return e=t.sent(),[4,e.present()];case 2:return t.sent(),[2]}}))}))},pointSelection:function(e,t,n){try{var r=n.dataPointIndex,i=n.seriesIndex,o=i<=0?0:i;this.runTableDrill(this.series[o].raw[r])}catch(e){}},buildSeries:function(e){var t=Object(p["uniq"])(Object.keys(e)),n=function(t,n,r){t in n||(n[t]=[]);var i=Object.entries(e[t]).filter((function(e){e[0];var t=e[1];return r(t.patient_present,t.guardian_present)})).map((function(e){var t=e[0];return t}));return n[t]=Object(s["f"])(n[t],i),n},r=function(e){return t.map((function(t){return[new Date(t).getTime(),e[t].length]}))},i=function(e){return t.map((function(t){return e[t]}))};for(var o in e)n(o,this.patientPresent,(function(e,t){return e&&!t})),n(o,this.guardianPresent,(function(e,t){return!e&&t})),n(o,this.bothPresent,(function(e,t){return e&&t}));return[{name:"Patient present",raw:i(this.patientPresent),data:r(this.patientPresent)},{name:"Guardian present",raw:i(this.guardianPresent),data:r(this.guardianPresent)},{name:"Both patient and guardian present",raw:i(this.bothPresent),data:r(this.bothPresent)}]}}}),O=n("d959"),j=n.n(O);const w=j()(f,[["render",c]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-2d238053.b8252bf9.js.map