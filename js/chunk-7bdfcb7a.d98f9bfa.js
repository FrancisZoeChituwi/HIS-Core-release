(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bdfcb7a"],{"454a":function(e,t,n){},"7bdc":function(e,t,n){"use strict";n.r(t);var i=n("7a23");function o(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,canExportCsv:!1,canExportPDf:!1,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}n("d81d"),n("b0c0"),n("d3b7"),n("25f0");var r=n("9ab4"),c=n("4ba2"),s=n("d95e"),a=n("9ceb"),u=n("1c74"),d=function(e){function t(){var t=e.call(this)||this;return t.identifierType=-1,t}return Object(r["c"])(t,e),t.getIdentifierTypes=function(){return e.getJson.call(this,"types/patient_identifiers")},t.prototype.getIdentifierType=function(){return this.identifierType},t.prototype.setIdentifierType=function(e){this.identifierType=e},t.prototype.getDuplicateIndentifiers=function(){return u["d"].getJson("search/identifiers/duplicates",{type_id:this.identifierType})},t.prototype.getPatientsByIdentifier=function(e){return u["d"].getJson("search/patients/by_identifier",{type_id:this.identifierType,identifier:e})},t}(u["d"]),l=n("2706"),f={key:0},b={key:1},p=Object(i["createTextVNode"])(" Close ");function h(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("ion-title"),a=Object(i["resolveComponent"])("ion-toolbar"),u=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("his-basic-table"),l=Object(i["resolveComponent"])("text-skeloton"),h=Object(i["resolveComponent"])("ion-content"),j=Object(i["resolveComponent"])("ion-button"),O=Object(i["resolveComponent"])("ion-footer");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(h,null,{default:Object(i["withCtx"])((function(){return[e.ready?(Object(i["openBlock"])(),Object(i["createBlock"])("div",f,[Object(i["createVNode"])(d,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",b,[Object(i["createVNode"])(l)]))]})),_:1}),Object(i["createVNode"])(O,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{color:"danger",onClick:e.closeModal,slot:"end"},{default:Object(i["withCtx"])((function(){return[p]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var j=n("a3a5"),O=n("8a30"),v=Object(i["withScopeId"])("data-v-65e1cf74"),m=v((function(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("ion-skeleton-text"),a=Object(i["resolveComponent"])("ion-item"),u=Object(i["resolveComponent"])("ion-list");return Object(i["openBlock"])(),Object(i["createBlock"])(u,null,{default:v((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.items,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:t},{default:v((function(){return[Object(i["createVNode"])(s,{animated:"",style:{width:"100%"}})]})),_:2},1024)})),128))]})),_:1})})),w=(n("a9e3"),Object(i["defineComponent"])({components:{IonSkeletonText:O["I"],IonList:O["w"],IonItem:O["u"]},props:{itemCount:{type:Number,default:10}},setup:function(e){for(var t=[],n=0;n<e.itemCount;++n)t.push(n);return{items:t}}})),y=(n("95a0"),n("d959")),C=n.n(y);const g=C()(w,[["render",m],["__scopeId","data-v-65e1cf74"]]);var I=g,k=Object(i["defineComponent"])({components:{HisBasicTable:j["a"],IonHeader:O["q"],IonToolbar:O["N"],IonContent:O["n"],IonFooter:O["o"],IonButton:O["d"],TextSkeloton:I},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},onRows:{type:Function,required:!0}},data:function(){return{rows:[],ready:!1}},watch:{onRows:{handler:function(e){return Object(r["b"])(this,void 0,void 0,(function(){var t;return Object(r["d"])(this,(function(n){switch(n.label){case 0:return e?(t=this,[4,e()]):[3,2];case 1:t.rows=n.sent(),this.ready=!0,n.label=2;case 2:return[2]}}))}))},immediate:!0,deep:!0}},methods:{closeModal:function(){return Object(r["b"])(this,void 0,void 0,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,O["U"].dismiss({})];case 1:return e.sent(),[2]}}))}))}}});const T=C()(k,[["render",h]]);var B=T,N=n("23e6"),x=n("9283"),_=n("fa73"),D=n("b5e4"),V=Object(i["defineComponent"])({components:{ReportTemplate:c["a"]},data:function(){return{service:{},dde:{},title:"Duplicate Identifiers",fields:[],rows:[],columns:[[a["a"].thTxt("Identifier"),a["a"].thTxt("Count"),a["a"].thTxt("View"),a["a"].thTxt("Resolve")]]}},created:function(){return Object(r["b"])(this,void 0,void 0,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return this.fields=this.getFormFields(),this.dde=new _["a"],[4,this.dde.loadDDEStatus()];case 1:return e.sent(),[2]}}))}))},methods:{onPeriod:function(e){var t=e.identifier;return Object(r["b"])(this,void 0,void 0,(function(){var e,n;return Object(r["d"])(this,(function(i){switch(i.label){case 0:return e=parseInt(t.value.toString()),this.title=t.label+" Duplicates",this.service=new d,this.service.setIdentifierType(e),n=this,[4,this.getRows()];case 1:return n.rows=i.sent(),[2]}}))}))},getFormFields:function(){var e=this;return[{id:"identifier",helpText:"Select Identifier type",type:s["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},options:function(){return Object(r["b"])(e,void 0,void 0,(function(){return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,d.getIdentifierTypes()];case 1:return[2,e.sent().map((function(e){return{label:e.name,value:e.patient_identifier_type_id}}))]}}))}))}}]},toDate:function(e){return x["a"].toStandardHisDisplayFormat(e)},drillDuplicates:function(e){return Object(r["b"])(this,void 0,void 0,(function(){var t,n=this;return Object(r["d"])(this,(function(i){switch(i.label){case 0:return[4,O["U"].create({component:B,cssClass:"custom-modal",componentProps:{title:"Persons using identifier "+e,columns:["Given name","Family name","Gender","Birth date","Action"],onRows:function(){return Object(r["b"])(n,void 0,void 0,(function(){var t,n=this;return Object(r["d"])(this,(function(i){switch(i.label){case 0:return[4,this.service.getPatientsByIdentifier(e)];case 1:return t=i.sent(),[2,t.map((function(e){try{var t=new N["a"](e);return[t.getGivenName(),t.getFamilyName(),t.getGender(),n.toDate(t.getBirthdate()),{type:"button",name:"View",action:function(){O["U"].dismiss().then((function(){n.$router.push("/patient/dashboard/"+t.getID())}))}}]}catch(i){return Object(D["c"])("Unable to load patient details"),["N/A","N/A","N/A","N/A","N/A"]}}))]}}))}))}}})];case 1:return t=i.sent(),t.present(),[2]}}))}))},getRows:function(){return Object(r["b"])(this,void 0,void 0,(function(){var e=this;return Object(r["d"])(this,(function(t){switch(t.label){case 0:return[4,this.service.getDuplicateIndentifiers()];case 1:return[2,t.sent().map((function(t){return[a["a"].td(t.identifier),a["a"].td(t.count),a["a"].tdBtn("Select",(function(){return e.drillDuplicates(t.identifier)})),a["a"].tdBtn("Resolve",(function(){e.$router.push("/npid/duplicates/"+t.identifier)}),{event:{disabled:!(e.dde.isEnabled()&&3===e.service.getIdentifierType())}},"danger")]}))]}}))}))}}});const F=C()(V,[["render",o]]);t["default"]=F},"95a0":function(e,t,n){"use strict";n("454a")}}]);
//# sourceMappingURL=chunk-7bdfcb7a.d98f9bfa.js.map