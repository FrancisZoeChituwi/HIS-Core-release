(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226ccc"],{e9ce:function(t,e,r){"use strict";r.r(e);var a=r("7a23");function n(t,e,r,n,i,o){var s=Object(a["resolveComponent"])("report-template");return Object(a["openBlock"])(),Object(a["createBlock"])(s,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,canExportCsv:!0,canExportPDf:!0,reportReady:t.reportReady,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","onReportConfiguration"])}r("99af"),r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("159b");var i=r("9ab4"),o=r("1497"),s=r("44e3"),d=r("4ba2"),u=r("ad8d"),l=r("d95e"),c=r("9ceb"),p=Object(a["defineComponent"])({mixins:[s["a"]],components:{ReportTemplate:d["a"]},data:function(){return{title:"Lab test result(s)",rows:[],cohort:[],reportType:"",reportReady:!1,columns:[],patientLevelColumns:[[c["a"].thTxt("ARV#"),c["a"].thTxt("Gender"),c["a"].thTxt("Birthdate"),c["a"].thTxt("Ordered"),c["a"].thTxt("Specimen"),c["a"].thTxt("Test"),c["a"].thTxt("Result"),c["a"].thTxt("Released")]],disaggregatedColumns:[c["a"].thTxt("Age group"),c["a"].thTxt("Gender")]}},created:function(){this.report=new o["a"],this.fields=this.getFormFields()},methods:{onPeriod:function(t){var e=t.type,r=t.tests;return Object(i["b"])(this,void 0,void 0,(function(){return Object(i["d"])(this,(function(t){return this.reportReady=!0,this.rows=[],this.period=this.report.getDateIntervalPeriod(),this.reportType=e.value,"disaggregated"===this.reportType?this.setDisaggregatedRows(r):"patient_level"===this.reportType&&this.setPatientLevelRows(r),[2]}))}))},getFormFields:function(){var t=this;return Object(i["f"])(this.getDateDurationFields(),[{id:"tests",helpText:"Available test(s) results",type:l["b"].TT_MULTIPLE_SELECT,options:function(e,r,a){return Object(i["b"])(t,void 0,void 0,(function(){var t,e;return Object(i["d"])(this,(function(r){switch(r.label){case 0:return this.report.setStartDate(a.start_date),this.report.setEndDate(a.end_date),[4,this.report.getLabResultsReport()];case 1:return t=r.sent(),e=this.buildAvailableTests(t),[2,this.buildAvailableTestOptions(e)]}}))}))}},{id:"type",helpText:"Select report type",type:l["b"].TT_SELECT,options:function(){return[{label:"Disaggregated",value:"disaggregated"},{label:"Patient level",value:"patient_level"}]}}])},buildAvailableTests:function(t){var e=this,r={};return t.forEach((function(t){t.measures.forEach((function(a){a.name in r||(r[a.name]=[]),r[a.name].push({id:t.patient_id,arv:t.arv_number,gender:t.gender,ageGroup:t.age_group,birthdate:e.toDate(t.birthdate),ordered:e.toDate(t.order_date),specimen:t.test,test:a.name,result:a.modifier+" "+a.value,released:e.toDate(t.result_date)})}))})),r},buildAvailableTestOptions:function(t){var e=[];for(var r in t){var a=t[r];e.push({label:r,value:a.length,other:a})}return e},setDisaggregatedRows:function(t){var e=this,r=[],a=[];this.columns=[this.disaggregatedColumns.concat(t.map((function(t){return c["a"].thTxt(t.label)})))];var n=function(n){var s=u["a"][n],d=[c["a"].td(s),c["a"].td("M")],l=[c["a"].td(s),c["a"].td("F")];t.forEach((function(t){var r=t.other,a=function(t){return r.filter((function(e){return e.gender===t&&e.ageGroup===s})).map((function(t){return t.id}))};d.push(e.drill(a("M"))),l.push(e.drill(a("F")))})),r.push(d),a.push(l),o.rows=Object(i["f"])(a,r)},o=this;for(var s in u["a"])n(s)},setPatientLevelRows:function(t){var e=this;this.columns=[this.patientLevelColumns],t.forEach((function(t){var r=t.other;r.forEach((function(t){e.rows.push([c["a"].td(t.arv),c["a"].td(t.gender),c["a"].tdDate(t.birthdate),c["a"].tdDate(t.ordered),c["a"].td(t.specimen),c["a"].td(t.test),c["a"].td(t.result),c["a"].tdDate(t.released)])}))}))}}}),h=r("d959"),f=r.n(h);const v=f()(p,[["render",n]]);e["default"]=v}}]);
//# sourceMappingURL=chunk-2d226ccc.5b5a36f9.js.map