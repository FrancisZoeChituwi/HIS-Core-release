{"version":3,"sources":["webpack:///./src/apps/ART/views/encounters/BpAlert.vue?7dcc","webpack:///./src/apps/ART/views/encounters/BpAlert.vue","webpack:///./src/apps/ART/views/encounters/BpAlert.vue?67e7","webpack:///./src/apps/ART/views/encounters/BpAlert.vue?4045"],"names":["_withId","_hoisted_1","class","_hoisted_2","key","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_ctx","_cache","$props","$setup","$data","$options","_component_ion_content","_component_ion_button","_component_ion_toolbar","_component_ion_footer","_component_ion_page","default","hasPressureReading","patientOnBpDrugs","patientName","highBP","sysBp","dsBP","_","color","onClick","showRiskFactors","nextTask","size","slot","recaptureBp","mixins","EncounterMixin","components","IonFooter","IonContent","IonPage","IonButton","IonToolbar","data","riskFactors","isPregnant","systolicThreshold","diastolicTheshold","methods","create","component","RiskFactorModal","backdropDismiss","cssClass","componentProps","factors","modal","present","onDidDismiss","getRiskFactors","concepts","getConceptsByCategory","j","map","concept","getFirstValueCoded","patientID","name","val","value","Promise","all","this","$router","push","watch","ready","handler","r","message","loading","htn","providerID","diastolicThreshold","getDiastolicBp","getSystolicBp","onBpDrugs","patient","isChildBearing","dismiss","immediate","computed","getFullName","__exports__"],"mappings":"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","file":"js/chunk-bfe33a92.c83e408d.js","sourcesContent":["import { createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-146a0e6b\")\n\n_pushScopeId(\"data-v-146a0e6b\")\nconst _hoisted_1 = /*#__PURE__*/_createVNode(\"h1\", { class: \"ion-text-center\" }, \" High BP Alert \", -1)\nconst _hoisted_2 = {\n  key: 0,\n  class: \"vertically-align ion-text-center\"\n}\nconst _hoisted_3 = { style: {\"font-weight\":\"bold\"} }\nconst _hoisted_4 = { class: \"name\" }\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" has \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" blood pressure of \")\nconst _hoisted_7 = { class: \"bp\" }\nconst _hoisted_8 = /*#__PURE__*/_createVNode(\"br\", null, null, -1)\nconst _hoisted_9 = /*#__PURE__*/_createVNode(\"span\", null, [\n  /*#__PURE__*/_createTextVNode(\" Retesting BP is \"),\n  /*#__PURE__*/_createVNode(\"span\", { style: {\"font-weight\":\"bold\",\"color\":\"#000000\",\"text-decoration\":\"underline\"} }, \"optional\"),\n  /*#__PURE__*/_createTextVNode(\". \"),\n  /*#__PURE__*/_createVNode(\"br\"),\n  /*#__PURE__*/_createTextVNode(\" Do you want to test BP? \")\n], -1)\nconst _hoisted_10 = {\n  key: 1,\n  class: \"vertically-align ion-text-center\"\n}\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\" No BP Reading found \")\nconst _hoisted_12 = /*#__PURE__*/_createVNode(\"br\", null, null, -1)\nconst _hoisted_13 = /*#__PURE__*/_createVNode(\"h1\", null, \" Do you want to test BP? \", -1)\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" No \")\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" Yes \")\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withId(() => [\n      _createVNode(_component_ion_content, null, {\n        default: _withId(() => [\n          _hoisted_1,\n          (_ctx.hasPressureReading)\n            ? (_openBlock(), _createBlock(\"div\", _hoisted_2, [\n                _withDirectives(_createVNode(\"h2\", _hoisted_3, \" (Patient already on BP drugs) \", 512), [\n                  [_vShow, _ctx.patientOnBpDrugs]\n                ]),\n                _createVNode(\"h2\", null, [\n                  _createVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.patientName), 1),\n                  _hoisted_5,\n                  _withDirectives(_createVNode(\"span\", null, \" a high \", 512), [\n                    [_vShow, _ctx.highBP]\n                  ]),\n                  _hoisted_6,\n                  _createVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.sysBp) + \" / \" + _toDisplayString(_ctx.dsBP), 1),\n                  _hoisted_8,\n                  _hoisted_9\n                ])\n              ]))\n            : _createCommentVNode(\"\", true),\n          (!_ctx.hasPressureReading)\n            ? (_openBlock(), _createBlock(\"div\", _hoisted_10, [\n                _hoisted_11,\n                _hoisted_12,\n                _hoisted_13\n              ]))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_footer, null, {\n        default: _withId(() => [\n          _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n            default: _withId(() => [\n              _createVNode(_component_ion_button, {\n                onClick: _cache[1] || (_cache[1] = () => _ctx.hasPressureReading ? _ctx.showRiskFactors() : _ctx.nextTask()),\n                size: \"large\",\n                color: \"danger\",\n                slot: \"start\"\n              }, {\n                default: _withId(() => [\n                  _hoisted_14\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_ion_button, {\n                onClick: _ctx.recaptureBp,\n                size: \"large\",\n                color: \"success\",\n                slot: \"end\"\n              }, {\n                default: _withId(() => [\n                  _hoisted_15\n                ]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n})","\nimport { defineComponent } from 'vue'\nimport EncounterMixinVue from '../../../../views/EncounterMixin.vue'\nimport {\n    IonFooter,\n    IonContent,\n    IonPage,\n    IonButton,\n    IonToolbar,\n    loadingController,\n    modalController\n} from \"@ionic/vue\"\nimport ART_PROP from \"@/apps/ART/art_global_props\"\nimport { BPManagementService } from '../../services/htn_service'\nimport { ConceptService } from \"@/services/concept_service\";\nimport RiskFactorModal from \"@/components/DataViews/RiskFactorModal.vue\";\nimport { ObservationService } from \"@/services/observation_service\";\nimport { isEmpty } from \"lodash\";\n\nexport default defineComponent({\n    mixins: [EncounterMixinVue],\n    components: { \n        IonFooter,\n        IonContent,\n        IonPage,\n        IonButton,\n        IonToolbar\n    },\n    data: () => ({\n        sysBp: 0 as number,\n        dsBP: 0 as number,\n        riskFactors: [] as any,\n        patientOnBpDrugs: false as boolean,\n        isPregnant: false as boolean,\n        systolicThreshold: 145,\n        diastolicTheshold: 94\n    }),\n    methods: {\n        async showRiskFactors() {\n            const modal = await modalController.create({\n                component: RiskFactorModal,\n                backdropDismiss: false,\n                cssClass: \"large-modal\",\n                componentProps: {\n                    factors: this.riskFactors\n                }\n            })\n            modal.present()\n            const { data } = await modal.onDidDismiss();\n            if (!isEmpty(data)) this.nextTask()\n        },\n        async getRiskFactors() {\n            const concepts = ConceptService.getConceptsByCategory(\"risk factors\");\n            const j = concepts.map(async (concept) => {\n            const val = await ObservationService.getFirstValueCoded(this.patientID, concept.name)\n                return {\n                    concept: concept.name, value: val\n                }\n            })\n            return Promise.all(j);\n        },\n        recaptureBp() {\n            this.$router.push(`/art/encounters/vitals/${this.patientID}?vital_options=BP`)\n        }\n    },\n    watch: {\n        ready: {\n            async handler(r: boolean) {\n                if (!r) return\n                const loading = await loadingController.create({\n                    message: 'Verifying Blood Pressure...',\n                    backdropDismiss: false\n                })\n                await loading.present()\n                const htn = new BPManagementService(this.patientID, this.providerID)\n                this.riskFactors = await this.getRiskFactors();\n                this.systolicThreshold = (await ART_PROP.systolicThreshold()) || 145\n                this.diastolicTheshold = (await ART_PROP.diastolicThreshold()) || 94\n                this.dsBP = (await htn.getDiastolicBp()) || 0\n                this.sysBp = (await htn.getSystolicBp()) || 0\n                this.patientOnBpDrugs = (await htn.onBpDrugs()) || false\n                this.isPregnant = this.patient.isChildBearing()\n                    ? (await this.patient.isPregnant()) || false\n                    : false\n                loadingController.dismiss()\n            },\n            immediate: true\n        }\n    },\n    computed: {\n        patientName(): string {\n            return this.ready ? this.patient.getFullName() : 'Patient'\n        },\n        hasPressureReading(): boolean {\n            return this.sysBp > 0 && this.dsBP > 0\n        },\n        highBP(): boolean {\n            return (this.sysBp >= this.systolicThreshold\n                && this.dsBP >= this.diastolicTheshold || this.dsBP >= this.diastolicTheshold)\n                && !this.isPregnant\n        }\n    }\n})\n","import { render } from \"./BpAlert.vue?vue&type=template&id=146a0e6b&scoped=true&ts=true\"\nimport script from \"./BpAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./BpAlert.vue?vue&type=script&lang=ts\"\n\nimport \"./BpAlert.vue?vue&type=style&index=0&id=146a0e6b&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-146a0e6b\"]])\n\nexport default __exports__","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BpAlert.vue?vue&type=style&index=0&id=146a0e6b&scoped=true&lang=css\""],"sourceRoot":""}