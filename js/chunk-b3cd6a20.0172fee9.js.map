{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.flat.js","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack:///./node_modules/core-js/internals/flatten-into-array.js","webpack:///./src/apps/OPD/views/encounters/Complaints.vue?6236","webpack:///./src/apps/OPD/views/encounters/Complaints.vue","webpack:///./src/apps/OPD/views/encounters/Complaints.vue?e7d2"],"names":["$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","arguments","length","undefined","O","this","sourceLen","A","addToUnscopables","isArray","bind","original","source","start","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","TypeError","module","exports","render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_component_ion_page","default","cancelDestinationPath","cancelDestination","fields","onFinishAction","onSubmit","_","components","HisStandardForm","IonPage","mixins","EncounterMixin","data","complaintsService","watch","ready","handler","isReady","patientID","providerID","getFields","immediate","deep","methods","computedData","Promise","all","complaints","createEncounter","saveObservationList","nextTask","launchOrderSelection","create","component","LabOrderModal","backdropDismiss","cssClass","modal","present","onDidDismiss","id","helpText","type","TT_COMPLAINTS_PICKER","validation","required","computedValue","options","obs","map","option","parentObs","buildValueCoded","other","parent","childObs","buildValueCodedFromConceptId","concept_id","config","footerBtns","name","size","slot","color","visible","onClick","visibleOnStateChange","state","index","__exports__"],"mappings":"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","file":"js/chunk-b3cd6a20.0172fee9.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_his_standard_form, {\n        cancelDestinationPath: _ctx.cancelDestination,\n        fields: _ctx.fields,\n        onFinishAction: _ctx.onSubmit\n      }, null, 8, [\"cancelDestinationPath\", \"fields\", \"onFinishAction\"])\n    ]),\n    _: 1\n  }))\n}","\r\nimport { defineComponent } from 'vue'\r\nimport HisStandardForm from \"@/components/Forms/TouchScreenForm.vue\";\r\nimport EncounterMixinVue from '@/views/EncounterMixin.vue';\r\nimport { PatientComplaintsService } from \"@/apps/OPD/services/patient_complaints_service\";\r\nimport LabOrderModal from \"@/components/DataViews/LabOrderModal.vue\"\r\nimport Validation from '@/components/Forms/validations/StandardValidations';\r\nimport { Field, Option } from '@/components/Forms/FieldInterface';\r\nimport { FieldType } from '@/components/Forms/BaseFormElements';\r\nimport { modalController, IonPage } from '@ionic/vue';\r\n\r\nexport default defineComponent({\r\n  components: { HisStandardForm, IonPage },\r\n  mixins: [EncounterMixinVue],\r\n  data: () => ({\r\n    complaintsService: {} as any,\r\n  }),\r\n  watch: {\r\n    ready: {\r\n      async handler(isReady: boolean) {\r\n        if(isReady){\r\n          this.complaintsService = new PatientComplaintsService(this.patientID, this.providerID)\r\n          this.fields = this.getFields()\r\n        }\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    async onSubmit(_: any, computedData: any){     \r\n      const data = await Promise.all(computedData.complaints)   \r\n      await this.complaintsService.createEncounter()    \r\n      await this.complaintsService.saveObservationList(data)\r\n      this.nextTask()        \r\n    },\r\n    async launchOrderSelection() {\r\n      const modal = await modalController.create({\r\n        component: LabOrderModal,\r\n        backdropDismiss: false,\r\n        cssClass: 'large-modal'\r\n      })\r\n      modal.present()\r\n      await modal.onDidDismiss()\r\n    },\r\n    getFields(): Array<Field>{\r\n      return [\r\n        {\r\n          id: 'complaints',\r\n          helpText: 'Presenting Complaints',\r\n          type: FieldType.TT_COMPLAINTS_PICKER,\r\n          validation: (data: any) => Validation.required(data),\r\n          computedValue: (options: Option[]) => {\r\n            const obs = options.map(option => {\r\n              const parentObs = this.complaintsService.buildValueCoded('Presenting complaint', option.other.parent)\r\n              const childObs = this.complaintsService.buildValueCodedFromConceptId(option.other.parent, option.other.concept_id)\r\n             return [parentObs, childObs]\r\n            })\r\n            return obs.flat(1)\r\n          },\r\n          config: {\r\n            footerBtns: [\r\n              {\r\n                name: \"Lab Order\",\r\n                size: \"large\",\r\n                slot: \"end\",\r\n                color: \"primary\",\r\n                visible: true,\r\n                onClick: async () => await this.launchOrderSelection(),\r\n                visibleOnStateChange: (state: Record<string, any>) => {\r\n                  return state.index === 1;\r\n                },\r\n              },\r\n            ],\r\n          }\r\n        },\r\n      ]\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./Complaints.vue?vue&type=template&id=7cc5134c&ts=true\"\nimport script from \"./Complaints.vue?vue&type=script&lang=ts\"\nexport * from \"./Complaints.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\msuleman\\\\projects\\\\HIS-Core\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}