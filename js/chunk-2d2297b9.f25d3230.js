(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2297b9"],{de46:function(t,e,r){"use strict";r.r(e);var n=r("7a23");function a(t,e,r,a,o,i){var s=Object(n["resolveComponent"])("report-template");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,canExportCsv:!0,canExportPDf:!0,reportReady:t.reportReady,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","onReportConfiguration"])}r("99af"),r("4de4"),r("4160"),r("a15b"),r("d81d"),r("159b");var o=r("9ab4"),i=r("1497"),s=r("44e3"),d=r("4ba2"),u=r("ad8d"),l=r("d95e"),p=r("9ceb"),c=Object(n["defineComponent"])({mixins:[s["a"]],components:{ReportTemplate:d["a"]},data:function(){return{title:"Tests requested",rows:[],cohort:[],reportType:"",reportReady:!1,columns:[],patientLevelColumns:[[p["a"].thTxt("ARV#"),p["a"].thTxt("Gender"),p["a"].thTxt("Birthdate"),p["a"].thTxt("Ordered Date"),p["a"].thTxt("Test"),p["a"].thTxt("Reason")]],disaggregatedColumns:[p["a"].thTxt("Age group"),p["a"].thTxt("Gender")]}},created:function(){this.report=new i["a"],this.fields=this.getFormFields()},methods:{onPeriod:function(t){var e=t.type,r=t.tests;return Object(o["b"])(this,void 0,void 0,(function(){return Object(o["d"])(this,(function(t){return this.reportReady=!0,this.rows=[],this.period=this.report.getDateIntervalPeriod(),this.reportType=e.value,"disaggregated"===this.reportType?this.setDisaggregatedRows(r):"patient_level"===this.reportType&&this.setPatientLevelRows(r),[2]}))}))},getFormFields:function(){var t=this;return Object(o["f"])(this.getDateDurationFields(),[{id:"tests",helpText:"Test(s) Requested",type:l["b"].TT_MULTIPLE_SELECT,options:function(e,r,n){return Object(o["b"])(t,void 0,void 0,(function(){var t,e;return Object(o["d"])(this,(function(r){switch(r.label){case 0:return this.report.setStartDate(n.start_date),this.report.setEndDate(n.end_date),[4,this.report.getSamplesDrawnReport()];case 1:return t=r.sent(),e=this.buildAvailableTests(t),[2,this.buildAvailableTestOptions(e)]}}))}))}},{id:"type",helpText:"Select report type",type:l["b"].TT_SELECT,options:function(){return[{label:"Disaggregated",value:"disaggregated"},{label:"Patient level",value:"patient_level"}]}}])},buildAvailableTests:function(t){var e={};return t.forEach((function(t){t.tests.forEach((function(r){r in e||(e[r]=[]),e[r].push(t)}))})),e},buildAvailableTestOptions:function(t){var e=[];for(var r in t){var n=t[r];e.push({label:r,value:n.length,other:n})}return e},setDisaggregatedRows:function(t){var e=this,r=[],n=[];this.columns=[this.disaggregatedColumns.concat(t.map((function(t){return p["a"].thTxt(t.label)})))];var a=function(a){var s=u["a"][a],d=[p["a"].td(s),p["a"].td("M")],l=[p["a"].td(s),p["a"].td("F")];t.forEach((function(t){var r=t.other,n=function(t){return r.filter((function(e){return e.gender===t&&e.age_group===s})).map((function(t){return t.patient_id}))};d.push(e.drill(n("M"),"Males of "+s)),l.push(e.drill(n("F"),"Females of "+s))})),r.push(d),n.push(l),i.rows=Object(o["f"])(n,r)},i=this;for(var s in u["a"])a(s)},setPatientLevelRows:function(t){var e=this;this.columns=this.patientLevelColumns,t.forEach((function(t){var r=t.other;r.forEach((function(t){e.rows.push([p["a"].td(t.arv_number),p["a"].td(t.gender),p["a"].tdDate(t.birthdate),p["a"].tdDate(t.order_date),p["a"].td(t.tests.join(",")),p["a"].td(t.reason_for_test)])}))}))}}}),h=r("d959"),f=r.n(h);const v=f()(c,[["render",a]]);e["default"]=v}}]);
//# sourceMappingURL=chunk-2d2297b9.f25d3230.js.map