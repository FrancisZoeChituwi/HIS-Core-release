(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-770d622c"],{c7512:function(e,t,n){"use strict";n.r(t);var i=n("7a23");function r(e,t,n,r,a,o){var u=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(u,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var a=n("5530"),o=(n("96cf"),n("1da1")),u=n("9441"),c=n("7365"),s=n("d4ec"),l=n("262e"),d=n("2caf"),f=n("cc6f"),p=function(e){Object(l["a"])(n,e);var t=Object(d["a"])(n);function n(e,i){return Object(s["a"])(this,n),t.call(this,e,104,i)}return n}(f["a"]),b=n("bee2"),v=n("45eb"),h=n("7e84"),m=n("1c74"),T=function(e){Object(l["a"])(n,e);var t=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),t.call(this)}return Object(b["a"])(n,null,[{key:"create",value:function(e,t,i){return Object(v["a"])(Object(h["a"])(n),"postJson",this).call(this,"patient_identifiers",{identifier:i,identifier_type:t,patient_id:e})}}]),n}(m["d"]),g=n("2706"),w=n("d95e"),O=n("e86e"),y=n("b5e4"),_=Object(i["defineComponent"])({components:{HisStandardForm:u["a"]},mixins:[c["a"]],data:function(){return{registrationService:{}}},watch:{ready:{handler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&(t.registrationService=new p(t.patient.getID(),t.providerID),t.fields=t.getFields());case 1:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{onSubmit:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var r,o,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.asignNID(e);case 2:return i.next=4,n.registrationService.createEncounter();case 4:if(r=i.sent,r){i.next=7;break}return i.abrupt("return",Object(y["e"])("Unable to create registration encounter"));case 7:return i.next=9,n.resolveObs(Object(a["a"])({},t));case 9:return o=i.sent,i.next=12,n.registrationService.saveObservationList(o);case 12:if(u=i.sent,u){i.next=15;break}return i.abrupt("return",Object(y["e"])("Unable to save observations"));case 15:n.nextTask();case 16:case"end":return i.stop()}}),i)})))()},asignNID:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e["national_id_available"],r=e["national_id"],!i||"Yes"!==i["value"]){n.next=5;break}return n.next=5,T.create(t.patient.getID(),28,r["value"]);case 5:case"end":return n.stop()}}),n)})))()},getFields:function(){var e=this;return[{id:"visit_type",helpText:"Type of visit",type:w["b"].TT_SELECT,validation:function(e){return g["a"].required(e)},computedValue:function(t){var n=t.value;return{obs:e.registrationService.buildValueCoded("Type of visit",n)}},options:function(){return[{label:"New",value:"New patient"},{label:"Referral",value:"Referral"},{label:"Re-visiting",value:"Re-visiting"}]}},{id:"referring_facility_name",helpText:"Referred from",type:w["b"].TT_SELECT,validation:function(e){return g["a"].required(e)},computedValue:function(t){var n=t.label;return{obs:e.registrationService.buildValueText("Referred from",n)}},condition:function(e){return"Referral"===e.visit_type.value},options:function(){return Object(O["b"])("")},config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"national_id_available",helpText:"National ID avalable",type:w["b"].TT_SELECT,validation:function(e){return g["a"].required(e)},condition:function(){return"Unknown"===e.patient.findIdentifierByType("Malawi National ID")},options:function(){return e.yesNoUnknownOptions()},appearInSummary:function(){return!1}},{id:"national_id",helpText:"Enter National ID",type:w["b"].TT_TEXT,validation:function(e){return g["a"].required(e)},condition:function(e){return"Yes"===e.national_id_available.value},summaryMapValue:function(e){var t=e.value;return{value:t,label:"National ID"}}},{id:"patient_pregnant",helpText:"Patient pregnant",type:w["b"].TT_SELECT,validation:function(e){return g["a"].required(e)},computedValue:function(t){var n=t.value;return{obs:e.registrationService.buildValueCoded("PATIENT PREGNANT",n)}},condition:function(){return e.patient.isChildBearing()},options:function(){return e.yesNoUnknownOptions()},config:{showKeyboard:!0,isFilterDataViaApi:!0}}]}}}),j=n("d959"),x=n.n(j);const k=x()(_,[["render",r]]);t["default"]=k}}]);
//# sourceMappingURL=chunk-770d622c.3b9575fd.js.map