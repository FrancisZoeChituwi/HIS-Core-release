(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b3c4e77"],{"4b630":function(t,e,r){},"552a":function(t,e,r){"use strict";var n=r("7a23"),o=Object(n["withScopeId"])("data-v-4aa5994e");Object(n["pushScopeId"])("data-v-4aa5994e");var i=Object(n["createTextVNode"])("Title"),s=Object(n["createTextVNode"])("Period"),a={class:"report-content"};Object(n["popScopeId"])();var c=o((function(t,e,r,c,u,d){var l=Object(n["resolveComponent"])("his-standard-form"),p=Object(n["resolveComponent"])("ion-col"),b=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("ion-toolbar"),f=Object(n["resolveComponent"])("ion-header"),m=Object(n["resolveComponent"])("report-table"),g=Object(n["resolveComponent"])("ion-content"),O=Object(n["resolveComponent"])("his-footer"),v=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["withDirectives"])(Object(n["createVNode"])(l,{onOnFinish:t.onFinish,skipSummary:!0,fields:t.fields},null,8,["onOnFinish","fields"]),[[n["vShow"],t.showForm]]),t.showForm?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:0},{default:o((function(){return[Object(n["createVNode"])(f,null,{default:o((function(){return[Object(n["createVNode"])(h,null,{default:o((function(){return[Object(n["createVNode"])(b,null,{default:o((function(){return[Object(n["createVNode"])(p,{size:"2"},{default:o((function(){return[Object(n["createVNode"])("img",{class:"logo",src:t.logo},null,8,["src"])]})),_:1}),Object(n["createVNode"])(p,null,{default:o((function(){return[Object(n["createVNode"])(b,null,{default:o((function(){return[Object(n["createVNode"])(p,{size:"2"},{default:o((function(){return[i]})),_:1}),Object(n["createVNode"])(p,null,{default:o((function(){return[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.title),1)]})),_:1})]})),_:1}),t.period?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0},{default:o((function(){return[Object(n["createVNode"])(p,{size:"2"},{default:o((function(){return[s]})),_:1}),Object(n["createVNode"])(p,null,{default:o((function(){return[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.period),1)]})),_:1})]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(g,null,{default:o((function(){return[Object(n["createVNode"])("div",a,[Object(n["createVNode"])(m,{rows:t.rows,columns:t.columns,paginated:t.paginated,itemsPerPage:t.itemsPerPage},null,8,["rows","columns","paginated","itemsPerPage"])])]})),_:1}),Object(n["createVNode"])(O,{btns:t.btns},null,8,["btns"])]})),_:1}))],64)})),u=(r("a9e3"),r("9ab4")),d=r("0f25"),l=r("80e3"),p=r("ba82"),b=r("9ceb"),h=r("7920"),f=r("8a30"),m=r("b5e4"),g=Object(n["defineComponent"])({components:{HisStandardForm:h["a"],IonHeader:f["q"],ReportTable:l["a"],HisFooter:d["a"],IonPage:f["B"],IonContent:f["n"],IonToolbar:f["N"],IonRow:f["F"],IonCol:f["m"]},props:{title:{type:String,required:!0},period:{type:String,default:""},fields:{type:Object,default:function(){return[]}},columns:{type:Object,required:!0},rows:{type:Object,required:!0},paginated:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:5},customBtns:{type:Array,default:function(){return[]}},canExportPDf:{type:Boolean,default:!0},canExportCsv:{type:Boolean,default:!0},onReportConfiguration:{type:Function,required:!1}},data:function(){return{formData:{},computeFormData:{},btns:[],isLoadingData:!1,showForm:!1,logo:"/assets/images/login-logos/Malawi-Coat_of_arms_of_arms.png"}},methods:{getFileName:function(){return this.title+"-"+this.period},onFinish:function(t,e){return Object(u["b"])(this,void 0,void 0,(function(){var r;return Object(u["d"])(this,(function(n){switch(n.label){case 0:return this.formData=t,this.computeFormData=e,this.showForm=!1,[4,this.presentLoading()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,6]),this.onReportConfiguration?[4,this.onReportConfiguration(this.formData,this.computeFormData)]:[3,4];case 3:n.sent(),n.label=4;case 4:return f["S"].dismiss(),[3,6];case 5:return r=n.sent(),console.error(r),Object(m["c"])(r),f["S"].dismiss(),[3,6];case 6:return[2]}}))}))},reloadReport:function(){return Object(u["b"])(this,void 0,void 0,(function(){return Object(u["d"])(this,(function(t){switch(t.label){case 0:return[4,this.onFinish(this.formData,this.computeFormData)];case 1:return t.sent(),[2]}}))}))},presentLoading:function(){return Object(u["b"])(this,void 0,void 0,(function(){var t;return Object(u["d"])(this,(function(e){switch(e.label){case 0:return[4,f["S"].create({message:"Please wait...",backdropDismiss:!1})];case 1:return t=e.sent(),[4,t.present()];case 2:return e.sent(),[2]}}))}))}},created:function(){var t=this;this.showForm=!!this.fields.length,this.btns=this.customBtns,this.canExportCsv&&this.btns.push({name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){var t,e,r;return Object(u["d"])(this,(function(n){return t=Object(b["b"])(this.columns,this.rows),e=t.columns,r=t.rows,Object(p["a"])(e,r,this.getFileName()),[2]}))}))}}),this.canExportPDf&&this.btns.push({name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){var t,e,r;return Object(u["d"])(this,(function(n){return t=Object(b["b"])(this.columns,this.rows),e=t.columns,r=t.rows,Object(p["b"])(e,r,this.getFileName()),[2]}))}))}}),this.btns.push({name:"Back",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){return t.showForm=!0}}),this.btns.push({name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){return Object(u["d"])(this,(function(t){return[2,this.reloadReport()]}))}))}}),this.btns.push({name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){return Object(u["b"])(t,void 0,void 0,(function(){return Object(u["d"])(this,(function(t){return[2,this.$router.push({path:"/"})]}))}))}})}}),O=(r("5965"),r("d959")),v=r.n(O);const j=v()(g,[["render",c],["__scopeId","data-v-4aa5994e"]]);e["a"]=j},5965:function(t,e,r){"use strict";r("4b630")},e4c1:function(t,e,r){"use strict";r.r(e);var n=r("7a23");function o(t,e,r,o,i,s){var a=Object(n["resolveComponent"])("report-template"),c=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(c,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(a,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]})),_:1})}r("13d5"),r("07ac");var i=r("9ab4"),s=r("fcd5"),a=r("552a"),c=r("9ceb"),u=r("44e3"),d=r("2ef0"),l=r("8a30"),p=Object(n["defineComponent"])({components:{ReportTemplate:a["a"],IonPage:l["B"]},mixins:[u["a"]],data:function(){return{title:"OPD diagnosis by address report",rows:[],reportService:{},columns:[[c["a"].thTxt("Address"),c["a"].thTxt("Diagnosis"),c["a"].thTxt("Count")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{init:function(t,e){return Object(i["b"])(this,void 0,void 0,(function(){var t,r;return Object(i["d"])(this,(function(n){switch(n.label){case 0:return this.reportService=new s["d"],this.reportService.setStartDate(e.start_date),this.reportService.setEndDate(e.end_date),this.period=this.reportService.getDateIntervalPeriod(),t=this,r=this.buildRows,[4,this.reportService.getDiagnosisByAddress()];case 1:return t.rows=r.apply(this,[n.sent()]),[2]}}))}))},totalDiagnosis:function(t){return Object.values(t).reduce((function(t,e){return t+e}),0)},buildRows:function(t){var e=[];if(Object(d["isEmpty"])(t))return e;for(var r in t)for(var n in t[r])e.push([c["a"].td(n),c["a"].td(r),c["a"].td(t[r][n])]);return e}}}),b=r("d959"),h=r.n(b);const f=h()(p,[["render",o]]);e["default"]=f},fcd5:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return d})),r.d(e,"d",(function(){return l}));r("4160"),r("b64b"),r("159b");var n=r("9ab4"),o=r("1c74"),i=r("9283"),s=r("b89f"),a=r("bef6"),c={one:"AL 1",two:"AL 2",three:"AL 3",four:"LA 4"},u=["Diabetes","Hypertension","Stroke","Suspected cancer","Confirmed cancer","Palliative cancer","Asthma","Depression","Acute psychosis","Chronic psychosis","Epilepsy"],d=["Organic mental disorder (Chronic)","Organic mental disorder (acute)","Alcohol use mental disorder","Drug use mental disorder","Schizophrenia","Acute and transient psychotic disorder","Schizo-affective disorder","Mood-affective disorder (MANIC)","Mood-affective disorder (BIPOLAR)","Mood-affective disorder (DEPRESSION)","Anxiety disorder","Stress reaction adjustment disorder","Dissociative conversion disorder","Somatoform disorder","Puerperal mental disorder","Personality/Behaviour disorder","Mental retardation","Psychological mental disorder","Hyperkinetic conduct disorder","Epilepsy"],l=function(t){function e(){var e=t.call(this)||this;return e.endDate="",e.startDate="",e.quarter="",e.date=o["d"].getSessionDate(),e.programID=o["d"].getProgramID(),e}return Object(n["c"])(e,t),e.prototype.getPatientsWithNIDs=function(){return this.getReport("with_nids")},e.prototype.getClinicRegistrations=function(){return this.getReport("registration")},e.prototype.getDrugsGivenWithoutPrescription=function(){return this.getReport("drugs_given_without_prescription")},e.prototype.getDrugsGivenWithPrescription=function(){return this.getReport("drugs_given_with_prescription")},e.prototype.getDiagnosis=function(){return this.getReport("diagnosis")},e.prototype.getDiagnosisByAddress=function(){return this.getReport("diagnosis_by_address")},e.prototype.getLaPrescriptions=function(){var t="programs/"+this.programID+"/reports/la_prescriptions";return o["d"].getJson(t,{start_date:this.startDate,end_date:this.endDate})},e.prototype.printLaReport=function(t){var e=new s["a"],r="programs/"+this.programID+"/barcodes/la_report",n={"date[start]":this.startDate,"date[end]":this.endDate};return Object.keys(c).forEach((function(e,r){r++,n[r+"[prescription]"]=t["total_la_"+e+"_prescribed_drugs"],n[r+"[dispensed]"]=t["total_la_"+e+"_dispensed_drugs"]})),e.printLbl(r+"?"+a["a"].parameterizeObjToString(n))},e.prototype.getDateIntervalPeriod=function(){return i["a"].toStandardHisDisplayFormat(this.startDate)+" - "+i["a"].toStandardHisDisplayFormat(this.endDate)},e.prototype.setStartDate=function(t){this.startDate=t},e.prototype.setEndDate=function(t){this.endDate=t},e.prototype.setQuarter=function(t){this.quarter=t},e.prototype.getReport=function(t,e){return void 0===e&&(e={}),o["d"].getJson(t,this.buildRequest(e))},e.prototype.buildRequest=function(t){void 0===t&&(t={});var e={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(e["start_date"]=this.startDate,e["end_date"]=this.endDate),this.quarter&&(e["quarter"]=this.quarter),Object(n["a"])(Object(n["a"])({},e),t)},e.getReportQuarters=function(t){void 0===t&&(t=4);for(var e=[],r=i["a"].getCurrentYear(),n=0;n<t;++n)e.push({name:"Q4 "+r,start:r+"-10-01",end:r+"-12-31"}),e.push({name:"Q3 "+r,start:r+"-07-01",end:r+"-09-30"}),e.push({name:"Q2 "+r,start:r+"-04-01",end:r+"-06-30"}),e.push({name:"Q1 "+r,start:r+"-01-01",end:r+"-03-31"}),--r;return e},e}(o["d"])}}]);
//# sourceMappingURL=chunk-2b3c4e77.4325ed34.js.map